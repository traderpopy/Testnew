(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1800],{127:(e,t,r)=>{"use strict";var n=Array.prototype.slice,i=r(90952),s=Object.keys,a=s?function(e){return s(e)}:r(92055),o=Object.keys;a.shim=function(){return Object.keys?!function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)&&(Object.keys=function(e){return i(e)?o(n.call(e)):o(e)}):Object.keys=a,Object.keys||a},e.exports=a},636:e=>{"use strict";e.exports=ReferenceError},1193:e=>{"use strict";e.exports=Error},4709:(e,t,r)=>{"use strict";t.parse=r(15250),t.stringify=r(53956)},4729:(e,t,r)=>{"use strict";var n=r(13691),i=r(48524),s=r(92391),a=r(5719);e.exports=function(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new s("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new s("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new s("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new s("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new s("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new s("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,p=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],c=!!a&&a(e,t);if(n)n(e,t,{configurable:null===p&&c?c.configurable:!p,enumerable:null===o&&c?c.enumerable:!o,value:r,writable:null===l&&c?c.writable:!l});else if(!u&&(o||l||p))throw new i("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");else e[t]=r}},5719:(e,t,r)=>{"use strict";var n=r(75323);if(n)try{n([],"length")}catch(e){n=null}e.exports=n},6337:(e,t,r)=>{"use strict";var n=r(61445);e.exports=Function.prototype.bind||n},8743:e=>{"use strict";e.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},8960:e=>{"use strict";e.exports=Function.prototype.call},11648:e=>{"use strict";e.exports=Math.round},13691:e=>{"use strict";var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch(e){t=!1}e.exports=t},14586:e=>{"use strict";e.exports=Object},14756:(e,t,r)=>{"use strict";var n=r(6337),i=r(92391),s=r(8960),a=r(47298);e.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new i("a function is required");return a(n,s,e)}},15250:e=>{"use strict";var t,r,n,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"};function s(e){throw{name:"SyntaxError",message:e,at:t,text:n}}function a(e){return e&&e!==r&&s("Expected '"+e+"' instead of '"+r+"'"),r=n.charAt(t),t+=1,r}function o(){var e,t="";for("-"===r&&(t="-",a("-"));r>="0"&&r<="9";)t+=r,a();if("."===r)for(t+=".";a()&&r>="0"&&r<="9";)t+=r;if("e"===r||"E"===r)for(t+=r,a(),("-"===r||"+"===r)&&(t+=r,a());r>="0"&&r<="9";)t+=r,a();return isFinite(e=Number(t))||s("Bad number"),e}function l(){var e,t,n,o="";if('"'===r)for(;a();)if('"'===r)return a(),o;else if("\\"===r)if(a(),"u"===r){for(t=0,n=0;t<4&&isFinite(e=parseInt(a(),16));t+=1)n=16*n+e;o+=String.fromCharCode(n)}else if("string"==typeof i[r])o+=i[r];else break;else o+=r;s("Bad string")}function p(){for(;r&&r<=" ";)a()}function u(){switch(p(),r){case"{":var e,t={};if("{"===r){if(a("{"),p(),"}"===r)return a("}"),t;for(;r;){if(e=l(),p(),a(":"),Object.prototype.hasOwnProperty.call(t,e)&&s('Duplicate key "'+e+'"'),t[e]=u(),p(),"}"===r)return a("}"),t;a(","),p()}}s("Bad object");return;case"[":var n=[];if("["===r){if(a("["),p(),"]"===r)return a("]"),n;for(;r;){if(n.push(u()),p(),"]"===r)return a("]"),n;a(","),p()}}s("Bad array");return;case'"':return l();case"-":return o();default:return r>="0"&&r<="9"?o():function(){switch(r){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null;default:s("Unexpected '"+r+"'")}}()}}e.exports=function(e,i){var a;return n=e,t=0,r=" ",a=u(),p(),r&&s("Syntax error"),"function"==typeof i?function e(t,r){var n,s,a=t[r];if(a&&"object"==typeof a)for(n in u)Object.prototype.hasOwnProperty.call(a,n)&&(void 0===(s=e(a,n))?delete a[n]:a[n]=s);return i.call(t,r,a)}({"":a},""):a}},20647:e=>{"use strict";e.exports=URIError},22561:(e,t,r)=>{"use strict";var n=Function.prototype.call,i=Object.prototype.hasOwnProperty;e.exports=r(6337).call(n,i)},24386:(e,t,r)=>{"use strict";e.exports=r(14586).getPrototypeOf||null},30588:e=>{"use strict";e.exports=RangeError},32121:(e,t,r)=>{"use strict";var n=r(32871),i=r(13691),s=r(14756),a=r(92263);e.exports=function(e){var t=s(arguments),r=e.length-(arguments.length-1);return n(t,1+(r>0?r:0),!0)},i?i(e.exports,"apply",{value:a}):e.exports.apply=a},32871:(e,t,r)=>{"use strict";var n=r(56507),i=r(4729),s=r(81556)(),a=r(5719),o=r(92391),l=n("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new o("`fn` is not a function");if("number"!=typeof t||t<0||t>0xffffffff||l(t)!==t)throw new o("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,p=!0;if("length"in e&&a){var u=a(e,"length");u&&!u.configurable&&(n=!1),u&&!u.writable&&(p=!1)}return(n||p||!r)&&(s?i(e,"length",t,!0,!0):i(e,"length",t)),e}},35868:e=>{"use strict";e.exports=Function.prototype.apply},36333:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,i=r(39615);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&i()}},39615:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var s=Object.getOwnPropertyDescriptor(e,t);if(42!==s.value||!0!==s.enumerable)return!1}return!0}},44382:e=>{"use strict";e.exports=Math.max},47298:(e,t,r)=>{"use strict";var n=r(6337),i=r(35868),s=r(8960);e.exports=r(8743)||n.call(s,i)},48524:e=>{"use strict";e.exports=SyntaxError},51621:e=>{"use strict";e.exports=EvalError},52878:e=>{"use strict";e.exports=Math.floor},53628:e=>{"use strict";e.exports=Math.min},53956:e=>{"use strict";var t,r,n,i=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function a(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}e.exports=function(e,i,s){var o;if(t="",r="","number"==typeof s)for(o=0;o<s;o+=1)r+=" ";else"string"==typeof s&&(r=s);if(n=i,i&&"function"!=typeof i&&("object"!=typeof i||"number"!=typeof i.length))throw Error("JSON.stringify");return function e(i,s){var o,l,p,u,c,y=t,h=s[i];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(i)),"function"==typeof n&&(h=n.call(s,i,h)),typeof h){case"string":return a(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(t+=r,c=[],"[object Array]"===Object.prototype.toString.apply(h)){for(o=0,u=h.length;o<u;o+=1)c[o]=e(o,h)||"null";return p=0===c.length?"[]":t?"[\n"+t+c.join(",\n"+t)+"\n"+y+"]":"["+c.join(",")+"]",t=y,p}if(n&&"object"==typeof n)for(o=0,u=n.length;o<u;o+=1)"string"==typeof(l=n[o])&&(p=e(l,h))&&c.push(a(l)+(t?": ":":")+p);else for(l in h)Object.prototype.hasOwnProperty.call(h,l)&&(p=e(l,h))&&c.push(a(l)+(t?": ":":")+p);return p=0===c.length?"{}":t?"{\n"+t+c.join(",\n"+t)+"\n"+y+"}":"{"+c.join(",")+"}",t=y,p}}("",{"":e})}},56507:(e,t,r)=>{"use strict";var n,i=r(14586),s=r(1193),a=r(51621),o=r(30588),l=r(636),p=r(48524),u=r(92391),c=r(20647),y=r(88700),h=r(52878),d=r(44382),f=r(53628),g=r(85718),w=r(11648),m=r(74129),b=Function,v=function(e){try{return b('"use strict"; return ('+e+").constructor;")()}catch(e){}},A=r(5719),S=r(13691),x=function(){throw new u},q=A?function(){try{return arguments.callee,x}catch(e){try{return A(arguments,"callee").get}catch(e){return x}}}():x,_=r(36333)(),C=r(69794),T=r(24386),k=r(88748),E=r(35868),I=r(8960),O={},R="undefined"!=typeof Uint8Array&&C?C(Uint8Array):n,P={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":_&&C?C([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":O,"%AsyncGenerator%":O,"%AsyncGeneratorFunction%":O,"%AsyncIteratorPrototype%":O,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":s,"%eval%":eval,"%EvalError%":a,"%Float16Array%":"undefined"==typeof Float16Array?n:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":b,"%GeneratorFunction%":O,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":_&&C?C(C([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&_&&C?C(new Map()[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":i,"%Object.getOwnPropertyDescriptor%":A,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":o,"%ReferenceError%":l,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&_&&C?C(new Set()[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":_&&C?C(""[Symbol.iterator]()):n,"%Symbol%":_?Symbol:n,"%SyntaxError%":p,"%ThrowTypeError%":q,"%TypedArray%":R,"%TypeError%":u,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":c,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet,"%Function.prototype.call%":I,"%Function.prototype.apply%":E,"%Object.defineProperty%":S,"%Object.getPrototypeOf%":T,"%Math.abs%":y,"%Math.floor%":h,"%Math.max%":d,"%Math.min%":f,"%Math.pow%":g,"%Math.round%":w,"%Math.sign%":m,"%Reflect.getPrototypeOf%":k};if(C)try{null.error}catch(e){var D=C(C(e));P["%Error.prototype%"]=D}var j=function e(t){var r;if("%AsyncFunction%"===t)r=v("async function () {}");else if("%GeneratorFunction%"===t)r=v("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=v("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&C&&(r=C(i.prototype))}return P[t]=r,r},M={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},U=r(6337),N=r(22561),B=U.call(I,Array.prototype.concat),F=U.call(E,Array.prototype.splice),L=U.call(I,String.prototype.replace),$=U.call(I,String.prototype.slice),H=U.call(I,RegExp.prototype.exec),W=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,V=/\\(\\)?/g,G=function(e){var t=$(e,0,1),r=$(e,-1);if("%"===t&&"%"!==r)throw new p("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new p("invalid intrinsic syntax, expected opening `%`");var n=[];return L(e,W,function(e,t,r,i){n[n.length]=r?L(i,V,"$1"):t||e}),n},z=function(e,t){var r,n=e;if(N(M,n)&&(n="%"+(r=M[n])[0]+"%"),N(P,n)){var i=P[n];if(i===O&&(i=j(n)),void 0===i&&!t)throw new u("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new p("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new u('"allowMissing" argument must be a boolean');if(null===H(/^%?[^%]*%?$/,e))throw new p("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=G(e),n=r.length>0?r[0]:"",i=z("%"+n+"%",t),s=i.name,a=i.value,o=!1,l=i.alias;l&&(n=l[0],F(r,B([0,1],l)));for(var c=1,y=!0;c<r.length;c+=1){var h=r[c],d=$(h,0,1),f=$(h,-1);if(('"'===d||"'"===d||"`"===d||'"'===f||"'"===f||"`"===f)&&d!==f)throw new p("property names with quotes must have matching quotes");if("constructor"!==h&&y||(o=!0),n+="."+h,N(P,s="%"+n+"%"))a=P[s];else if(null!=a){if(!(h in a)){if(!t)throw new u("base intrinsic for "+e+" exists, but the property is not available.");return}if(A&&c+1>=r.length){var g=A(a,h);a=(y=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:a[h]}else y=N(a,h),a=a[h];y&&!o&&(P[s]=a)}}return a}},61445:e=>{"use strict";var t=Object.prototype.toString,r=Math.max,n=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r},i=function(e,t){for(var r=[],n=t||0,i=0;n<e.length;n+=1,i+=1)r[i]=e[n];return r},s=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};e.exports=function(e){var a,o=this;if("function"!=typeof o||"[object Function]"!==t.apply(o))throw TypeError("Function.prototype.bind called on incompatible "+o);for(var l=i(arguments,1),p=r(0,o.length-l.length),u=[],c=0;c<p;c++)u[c]="$"+c;if(a=Function("binder","return function ("+s(u,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof a){var t=o.apply(this,n(l,arguments));return Object(t)===t?t:this}return o.apply(e,n(l,arguments))}),o.prototype){var y=function(){};y.prototype=o.prototype,a.prototype=new y,y.prototype=null}return a}},69794:(e,t,r)=>{"use strict";var n=r(88748),i=r(24386),s=r(85840);e.exports=n?function(e){return n(e)}:i?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw TypeError("getProto: not an object");return i(e)}:s?function(e){return s(e)}:null},74129:(e,t,r)=>{"use strict";var n=r(91865);e.exports=function(e){return n(e)||0===e?e:e<0?-1:1}},75323:e=>{"use strict";e.exports=Object.getOwnPropertyDescriptor},77251:(e,t,r)=>{"use strict";var n=("undefined"!=typeof JSON?JSON:r(4709)).stringify,i=r(82548),s=r(127),a=r(32121),o=r(89540),l=o("Array.prototype.join"),p=o("Array.prototype.indexOf"),u=o("Array.prototype.splice"),c=o("Array.prototype.sort"),y=function(e,t){for(var r="",n=0;n<e;n+=1)r+=t;return r},h=function(e,t,r){return r};e.exports=function(e){var t=arguments.length>1?arguments[1]:void 0,r=t&&t.space||"";"number"==typeof r&&(r=y(r," "));var o=!!t&&"boolean"==typeof t.cycles&&t.cycles,d=t&&t.replacer?a(t.replacer):h;if(t&&void 0!==t.collapseEmpty&&"boolean"!=typeof t.collapseEmpty)throw TypeError("`collapseEmpty` must be a boolean, if provided");var f=!!t&&t.collapseEmpty,g="function"==typeof t?t:t&&t.cmp,w=g&&function(e){var t=g.length>2&&function(t){return e[t]};return function(r,n){return g({key:r,value:e[r]},{key:n,value:e[n]},t?{__proto__:null,get:t}:void 0)}},m=[];return function e(t,a,h,g){var b=r?"\n"+y(g,r):"",v=r?": ":":";if(h&&h.toJSON&&"function"==typeof h.toJSON&&(h=h.toJSON()),void 0!==(h=d(t,a,h))){if("object"!=typeof h||null===h)return n(h);var A=function(e,t){return f&&0===e.length?t:("[]"===t?"[":"{")+l(e,",")+b+("[]"===t?"]":"}")};if(i(h)){for(var S=[],x=0;x<h.length;x++){var q=e(h,x,h[x],g+1)||n(null);S[S.length]=b+r+q}return A(S,"[]")}if(-1!==p(m,h)){if(o)return n("__cycle__");throw TypeError("Converting circular structure to JSON")}m[m.length]=h;for(var _=c(s(h),w&&w(h)),S=[],x=0;x<_.length;x++){var a=_[x],C=e(h,a,h[a],g+1);if(C){var T=n(a)+v+C;S[S.length]=b+r+T}}return u(m,p(m,h),1),A(S,"{}")}}({"":e},"",e,0)}},80294:(e,t,r)=>{"use strict";let n;r.d(t,{PM:()=>ej,G5:()=>eN,Cf:()=>eM,TJ:()=>ez});class i extends Error{constructor(e,t){super(e,t),this.name="HyperliquidError"}}class s extends i{constructor(e,t){super(e,t),this.name="TransportError"}}var a=r(62889);let{p:o,n:l,Gx:p,Gy:u,b:c}={p:0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2fn,n:0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141n,h:1n,a:0n,b:7n,Gx:0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,Gy:0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n},y=32,h=(e="")=>{throw Error(e)},d=e=>"bigint"==typeof e,f=e=>"string"==typeof e,g=e=>e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name,w=(e,t)=>!g(e)||"number"==typeof t&&t>0&&e.length!==t?h("Uint8Array expected"):e,m=e=>new Uint8Array(e),b=e=>Uint8Array.from(e),v=(e,t)=>e.toString(16).padStart(t,"0"),A=e=>Array.from(w(e)).map(e=>v(e,2)).join(""),S={_0:48,_9:57,A:65,F:70,a:97,f:102},x=e=>e>=S._0&&e<=S._9?e-S._0:e>=S.A&&e<=S.F?e-(S.A-10):e>=S.a&&e<=S.f?e-(S.a-10):void 0,q=e=>{let t="hex invalid";if(!f(e))return h(t);let r=e.length,n=r/2;if(r%2)return h(t);let i=m(n);for(let r=0,s=0;r<n;r++,s+=2){let n=x(e.charCodeAt(s)),a=x(e.charCodeAt(s+1));if(void 0===n||void 0===a)return h(t);i[r]=16*n+a}return i},_=(e,t)=>w(f(e)?q(e):b(w(e)),t),C=()=>globalThis?.crypto,T=()=>C()?.subtle??h("crypto.subtle must be defined"),k=(...e)=>{let t=m(e.reduce((e,t)=>e+w(t).length,0)),r=0;return e.forEach(e=>{t.set(e,r),r+=e.length}),t},E=(e=y)=>C().getRandomValues(m(e)),I=BigInt,O=(e,t,r,n="bad number: out of range")=>d(e)&&t<=e&&e<r?e:h(n),R=(e,t=o)=>{let r=e%t;return r>=0n?r:t+r},P=e=>R(e,l),D=(e,t)=>{(0n===e||t<=0n)&&h("no inverse n="+e+" mod="+t);let r=R(e,t),n=t,i=0n,s=1n,a=1n,o=0n;for(;0n!==r;){let e=n/r,t=n%r,l=i-a*e,p=s-o*e;n=r,r=t,i=a,s=o,a=l,o=p}return 1n===n?R(i,t):h("no inverse")},j=e=>{let t=ep[e];return"function"!=typeof t&&h("hashes."+e+" not set"),t},M=e=>e instanceof V?e:h("Point expected"),U=e=>R(R(e*e)*e+c),N=e=>O(e,0n,o),B=e=>O(e,1n,o),F=e=>O(e,1n,l),L=e=>(1n&e)===0n,$=e=>Uint8Array.of(e),H=e=>$(L(e)?2:3),W=e=>{let t=U(B(e)),r=1n;for(let e=t,n=(o+1n)/4n;n>0n;n>>=1n)1n&n&&(r=r*e%o),e=e*e%o;return R(r*r)===t?r:h("sqrt invalid")};class V{static BASE;static ZERO;px;py;pz;constructor(e,t,r){this.px=N(e),this.py=B(t),this.pz=N(r),Object.freeze(this)}static fromBytes(e){let t;w(e);let r=e[0],n=e.subarray(1),i=K(n,0,y),s=e.length;if(s===y+1&&[2,3].includes(r)){let e=W(i),n=L(e);L(I(r))!==n&&(e=R(-e)),t=new V(i,e,1n)}return 65===s&&4===r&&(t=new V(i,K(n,y,64),1n)),t?t.assertValidity():h("bad point: not on curve")}equals(e){let{px:t,py:r,pz:n}=this,{px:i,py:s,pz:a}=M(e),o=R(t*a),l=R(i*n),p=R(r*a),u=R(s*n);return o===l&&p===u}is0(){return this.equals(z)}negate(){return new V(this.px,R(-this.py),this.pz)}double(){return this.add(this)}add(e){let{px:t,py:r,pz:n}=this,{px:i,py:s,pz:a}=M(e),o=0n,l=0n,p=0n,u=R(3n*c),y=R(t*i),h=R(r*s),d=R(n*a),f=R(t+r),g=R(i+s);f=R(f*g),g=R(y+h),f=R(f-g),g=R(t+n);let w=R(i+a);return g=R(g*w),w=R(y+d),g=R(g-w),w=R(r+n),o=R(s+a),w=R(w*o),o=R(h+d),w=R(w-o),p=R(0n*g),o=R(u*d),p=R(o+p),o=R(h-p),p=R(h+p),l=R(o*p),h=R(y+y),h=R(h+y),d=R(0n*d),g=R(u*g),h=R(h+d),d=R(y-d),d=R(0n*d),g=R(g+d),y=R(h*g),l=R(l+y),y=R(w*g),o=R(f*o),o=R(o-y),y=R(f*h),p=R(w*p),new V(o,l,p=R(p+y))}multiply(e,t=!0){if(!t&&0n===e)return z;if(F(e),1n===e)return this;if(this.equals(G))return ed(e).p;let r=z,n=G;for(let i=this;e>0n;i=i.double(),e>>=1n)1n&e?r=r.add(i):t&&(n=n.add(i));return r}toAffine(){let{px:e,py:t,pz:r}=this;if(this.equals(z))return{x:0n,y:0n};if(1n===r)return{x:e,y:t};let n=D(r,o);return 1n!==R(r*n)&&h("inverse invalid"),{x:R(e*n),y:R(t*n)}}assertValidity(){let{x:e,y:t}=this.toAffine();return B(e),B(t),R(t*t)===U(e)?this:h("bad point: not on curve")}toBytes(e=!0){let{x:t,y:r}=this.assertValidity().toAffine(),n=Z(t);return e?k(H(r),n):k($(4),n,Z(r))}static fromAffine(e){let{x:t,y:r}=e;return 0n===t&&0n===r?z:new V(t,r,1n)}toHex(e){return A(this.toBytes(e))}static fromPrivateKey(e){return G.multiply(Q(e))}static fromHex(e){return V.fromBytes(_(e))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}toRawBytes(e){return this.toBytes(e)}}let G=new V(p,u,1n),z=new V(0n,1n,0n);V.BASE=G,V.ZERO=z;let J=(e,t,r)=>G.multiply(t,!1).add(e.multiply(r,!1)).assertValidity(),Y=e=>I("0x"+(A(e)||"0")),K=(e,t,r)=>Y(e.subarray(t,r)),X=2n**256n,Z=e=>q(v(O(e,0n,X),64)),Q=e=>O(d(e)?e:Y(_(e,y)),1n,l,"private key invalid 3"),ee=e=>e>l>>1n;class et{r;s;recovery;constructor(e,t,r){this.r=F(e),this.s=F(t),null!=r&&(this.recovery=r),Object.freeze(this)}static fromBytes(e){return w(e,64),new et(K(e,0,y),K(e,y,64))}toBytes(){let{r:e,s:t}=this;return k(Z(e),Z(t))}addRecoveryBit(e){return new et(this.r,this.s,e)}hasHighS(){return ee(this.s)}toCompactRawBytes(){return this.toBytes()}toCompactHex(){return A(this.toBytes())}recoverPublicKey(e){return el(this,e)}static fromCompact(e){return et.fromBytes(_(e,64))}assertValidity(){return this}normalizeS(){let{r:e,s:t,recovery:r}=this;return ee(t)?new et(e,P(-t),r):this}}let er=e=>{let t=8*e.length-256;t>1024&&h("msg invalid");let r=Y(e);return t>0?r>>I(t):r},en=e=>P(er(w(e))),ei={lowS:!0},es=(e,t,r=ei)=>{["der","recovered","canonical"].some(e=>e in r)&&h("option not supported");let{lowS:n,extraEntropy:i}=r;null==n&&(n=!0);let s=en(_(e)),a=Z(s),o=Q(t),p=[Z(o),a];return i&&p.push(!0===i?E(y):_(i)),{seed:k(...p),k2sig:e=>{let t=er(e);if(!(1n<=t&&t<l))return;let r=G.multiply(t).toAffine(),i=P(r.x);if(0n===i)return;let a=P(D(t,l)*P(s+P(o*i)));if(0n===a)return;let p=a,u=2*(r.x!==i)|Number(1n&r.y);return n&&ee(a)&&(p=P(-a),u^=1),new et(i,p,u)}}},ea=e=>{let t=m(y),r=m(y),n=0,i=m(0),s=()=>{t.fill(1),r.fill(0),n=0},a="drbg: tried 1000 values";if(e){let e=(...e)=>ep.hmacSha256Async(r,t,...e),o=async(n=i)=>{r=await e($(0),n),t=await e(),0!==n.length&&(r=await e($(1),n),t=await e())},l=async()=>(n++>=1e3&&h(a),t=await e());return async(e,t)=>{let r;for(s(),await o(e);!(r=t(await l()));)await o();return s(),r}}{let e=(...e)=>j("hmacSha256Sync")(r,t,...e),o=(n=i)=>{r=e($(0),n),t=e(),0!==n.length&&(r=e($(1),n),t=e())},l=()=>(n++>=1e3&&h(a),t=e());return(e,t)=>{let r;for(s(),o(e);!(r=t(l()));)o();return s(),r}}},eo=async(e,t,r=ei)=>{let{seed:n,k2sig:i}=es(e,t,r);return await ea(!0)(n,i)},el=(e,t)=>{let{r,s:n,recovery:i}=e;[0,1,2,3].includes(i)||h("recovery id invalid");let s=en(_(t,y)),a=2===i||3===i?r+l:r;B(a);let o=k(H(I(i)),Z(a)),p=V.fromBytes(o),u=D(a,l);return J(p,P(-s*u),P(n*u))},ep={hexToBytes:q,bytesToHex:A,concatBytes:k,bytesToNumberBE:Y,numberToBytesBE:Z,mod:R,invert:D,hmacSha256Async:async(e,...t)=>{let r=T(),n="HMAC",i=await r.importKey("raw",e,{name:n,hash:{name:"SHA-256"}},!1,["sign"]);return m(await r.sign(n,i,k(...t)))},hmacSha256Sync:void 0,hashToPrivateKey:e=>(((e=_(e)).length<y+8||e.length>1024)&&h("expected 40-1024b"),Z(R(Y(e),l-1n)+1n)),randomBytes:E},eu={isValidPrivateKey:e=>{try{return!!Q(e)}catch(e){return!1}}},ec=Math.ceil(32)+1,ey=()=>{let e=[],t=G,r=t;for(let n=0;n<ec;n++){r=t,e.push(r);for(let n=1;n<128;n++)r=r.add(t),e.push(r);t=r.double()}return e},eh=(e,t)=>{let r=t.negate();return e?r:t},ed=e=>{let t=n||(n=ey()),r=z,i=G,s=I(255),a=I(8);for(let n=0;n<ec;n++){let o=Number(e&s);e>>=a,o>128&&(o-=256,e+=1n);let l=128*n,p=l+Math.abs(o)-1,u=n%2!=0,c=o<0;0===o?i=i.add(eh(u,t[l])):r=r.add(eh(c,t[p]))}return{p:r,f:i}};var ef=r(75852);function eg(e){return"object"==typeof e&&null!==e&&"signTypedData"in e&&"function"==typeof e.signTypedData&&3===e.signTypedData.length}function ew(e){return"object"==typeof e&&null!==e&&"_signTypedData"in e&&"function"==typeof e._signTypedData&&3===e._signTypedData.length}async function em(e){let{privateKey:t,domain:r={},types:n,primaryType:i,message:s}=e,o=function(e){let{domain:t,types:r,primaryType:n,message:i}=e,s=[];void 0!==t.name&&s.push({name:"name",type:"string"}),void 0!==t.version&&s.push({name:"version",type:"string"}),void 0!==t.chainId&&s.push({name:"chainId",type:"uint256"}),void 0!==t.verifyingContract&&s.push({name:"verifyingContract",type:"address"}),void 0!==t.salt&&s.push({name:"salt",type:"bytes32"});let o={EIP712Domain:s,...r},l=[new Uint8Array([25,1])];return l.push(eb("EIP712Domain",t,o)),"EIP712Domain"!==n&&l.push(eb(n,i,o)),(0,a.lY)(ep.concatBytes(...l))}({domain:r,types:n,primaryType:i,message:s}),l=await eo(o,ev(t)),p=l.r.toString(16).padStart(64,"0"),u=l.s.toString(16).padStart(64,"0"),c=(l.recovery+27).toString(16).padStart(2,"0");return`0x${p}${u}${c}`}function eb(e,t,r){let n=(0,a.lY)(new TextEncoder().encode(function(e,t){let r=function e(t,r,n=new Set){if(n.has(t)||!r[t])return[];for(let i of(n.add(t),r[t])){let t=i.type.replace(/\[\d*\]$/,"");r[t]&&e(t,r,n)}return Array.from(n)}(e,t);return[e,...r.filter(t=>t!==e).sort()].map(e=>`${e}(${t[e].map(e=>`${e.type} ${e.name}`).join(",")})`).join("")}(e,r))),i=r[e].map(e=>(function e(t,r,n){let i=t.match(/^(.*)\[(\d*)\]$/);if(i){let[,s,o]=i;if(!Array.isArray(r))throw Error(`Expected array for ${t}, got ${typeof r}`);if(o&&r.length!==+o)throw Error(`Invalid length for ${t}: expected ${o}, got ${r.length}`);let l=r.map(t=>e(s,t,n));return(0,a.lY)(ep.concatBytes(...l))}if(n[t])return void 0===r?new Uint8Array(32):eb(t,r,n);if("string"===t)return(0,a.lY)(new TextEncoder().encode(r));if("address"===t){let e=ep.hexToBytes(ev(r));if(20!==e.length)throw Error("address must be 20 bytes");let t=new Uint8Array(32);return t.set(e,12),t}if(t.startsWith("uint")||t.startsWith("int")){let e=t.startsWith("uint"),n=parseInt(t.slice(e?4:3)||"256");if(n>256||n%8!=0)throw Error(`Unsupported bit size for ${t}: ${n}`);let i=BigInt(r),s=BigInt.asUintN(256,e?BigInt.asUintN(n,i):BigInt.asIntN(n,i)).toString(16).padStart(64,"0");return ep.hexToBytes(s)}if("bool"===t){let e=new Uint8Array(32);return e[31]=+!!r,e}if("bytes"===t){let e="string"==typeof r?ep.hexToBytes(ev(r)):r;return(0,a.lY)(e)}let s=t.match(/^bytes(\d+)$/);if(s){let e=parseInt(s[1]);if(0===e||e>32)throw Error(`Unsupported bytes size: ${e}`);let n=ep.hexToBytes(ev(r));if(n.length!==e)throw Error(`Invalid length for ${t}: expected ${e}, got ${n.length}`);let i=new Uint8Array(32);return i.set(n,0),i}throw Error(`Unsupported type: ${t}`)})(e.type,t[e.name],r));return(0,a.lY)(ep.concatBytes(n,...i))}function ev(e){return e.startsWith("0x")?e.slice(2):e}function eA(e){return"object"==typeof e&&null!==e&&"signTypedData"in e&&"function"==typeof e.signTypedData&&(1===e.signTypedData.length||2===e.signTypedData.length)}async function eS(e){let{ethereum:t,domain:r,types:n,primaryType:i,message:s}=e,a=await t.request({method:"eth_requestAccounts",params:[]});if(!Array.isArray(a)||0===a.length)throw Error("No Ethereum accounts available");let o=a[0],l=JSON.stringify({domain:r,types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],...n},primaryType:i,message:s});return await t.request({method:"eth_signTypedData_v4",params:[o,l]})}function ex(e){return"object"==typeof e&&null!==e&&"request"in e&&"function"==typeof e.request&&e.request.length>=1}async function eq(e){let t,{wallet:r,domain:n,types:i,primaryType:s,message:a}=e;if("string"==typeof r&&eu.isValidPrivateKey(ev(r)))t=await em({privateKey:r,domain:n,types:i,primaryType:s,message:a});else if(eA(r))t=await r.signTypedData({domain:n,types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],...i},primaryType:s,message:a});else if(eg(r))t=await r.signTypedData(n,i,a);else if(ew(r))t=await r._signTypedData(n,i,a);else if(ex(r))t=await eS({ethereum:r,domain:n,types:i,primaryType:s,message:a});else throw Error("Unsupported wallet for signing typed data");var o=t;return{r:`0x${o.slice(2,66)}`,s:`0x${o.slice(66,130)}`,v:parseInt(o.slice(130,132),16)}}let e_={approveAgent:e=>({type:e.type,signatureChainId:e.signatureChainId,hyperliquidChain:e.hyperliquidChain,agentAddress:e.agentAddress.toLowerCase(),agentName:e.agentName??"",nonce:e.nonce}),approveBuilderFee:e=>({type:e.type,signatureChainId:e.signatureChainId,hyperliquidChain:e.hyperliquidChain,maxFeeRate:e.maxFeeRate,builder:e.builder.toLowerCase(),nonce:e.nonce}),batchModify:e=>({type:e.type,modifies:e.modifies.map(e=>{let t={oid:e.oid,order:{a:e.order.a,b:e.order.b,p:eC(e.order.p),s:eC(e.order.s),r:e.order.r,t:"limit"in e.order.t?{limit:{tif:e.order.t.limit.tif}}:{trigger:{isMarket:e.order.t.trigger.isMarket,triggerPx:eC(e.order.t.trigger.triggerPx),tpsl:e.order.t.trigger.tpsl}},c:e.order.c}};return void 0===t.order.c&&delete t.order.c,t})}),cancel:e=>({type:e.type,cancels:e.cancels.map(e=>({a:e.a,o:e.o}))}),cancelByCloid:e=>({type:e.type,cancels:e.cancels.map(e=>({asset:e.asset,cloid:e.cloid}))}),cDeposit:e=>({type:e.type,signatureChainId:e.signatureChainId,hyperliquidChain:e.hyperliquidChain,wei:e.wei,nonce:e.nonce}),claimRewards:e=>({type:e.type}),convertToMultiSigUser:e=>({type:e.type,signatureChainId:e.signatureChainId,hyperliquidChain:e.hyperliquidChain,signers:e.signers,nonce:e.nonce}),createSubAccount:e=>({type:e.type,name:e.name}),createVault:e=>({type:e.type,name:e.name,description:e.description,initialUsd:e.initialUsd,nonce:e.nonce}),CSignerAction:e=>"jailSelf"in e?{type:e.type,jailSelf:e.jailSelf}:{type:e.type,unjailSelf:e.unjailSelf},CValidatorAction:e=>"changeProfile"in e?{type:e.type,changeProfile:{node_ip:e.changeProfile.node_ip??null,name:e.changeProfile.name??null,description:e.changeProfile.description??null,unjailed:e.changeProfile.unjailed,disable_delegations:e.changeProfile.disable_delegations??null,commission_bps:e.changeProfile.commission_bps??null,signer:e.changeProfile.signer?.toLowerCase()??null}}:"register"in e?{type:e.type,register:{profile:{node_ip:{Ip:e.register.profile.node_ip.Ip},name:e.register.profile.name,description:e.register.profile.description,delegations_disabled:e.register.profile.delegations_disabled,commission_bps:e.register.profile.commission_bps,signer:e.register.profile.signer.toLowerCase()},unjailed:e.register.unjailed,initial_wei:e.register.initial_wei}}:{type:e.type,unregister:e.unregister},cWithdraw:e=>({type:e.type,signatureChainId:e.signatureChainId,hyperliquidChain:e.hyperliquidChain,wei:e.wei,nonce:e.nonce}),evmUserModify:e=>({type:e.type,usingBigBlocks:e.usingBigBlocks}),modify:e=>{let t={type:e.type,oid:e.oid,order:{a:e.order.a,b:e.order.b,p:eC(e.order.p),s:eC(e.order.s),r:e.order.r,t:"limit"in e.order.t?{limit:{tif:e.order.t.limit.tif}}:{trigger:{isMarket:e.order.t.trigger.isMarket,triggerPx:eC(e.order.t.trigger.triggerPx),tpsl:e.order.t.trigger.tpsl}},c:e.order.c}};return void 0===t.order.c&&delete t.order.c,t},multiSig:e=>({type:e.type,signatureChainId:e.signatureChainId,signatures:e.signatures.map(e=>({r:e.r.replace(/^0x0+/,"0x").toLowerCase(),s:e.s.replace(/^0x0+/,"0x").toLowerCase(),v:e.v})),payload:{multiSigUser:e.payload.multiSigUser.toLowerCase(),outerSigner:e.payload.outerSigner.toLowerCase(),action:structuredClone(e.payload.action)}}),order:e=>{let t={type:e.type,orders:e.orders.map(e=>{let t={a:e.a,b:e.b,p:eC(e.p),s:eC(e.s),r:e.r,t:"limit"in e.t?{limit:{tif:e.t.limit.tif}}:{trigger:{isMarket:e.t.trigger.isMarket,triggerPx:eC(e.t.trigger.triggerPx),tpsl:e.t.trigger.tpsl}},c:e.c};return void 0===e.c&&delete t.c,t}),grouping:e.grouping,builder:e.builder?{b:e.builder.b.toLowerCase(),f:e.builder.f}:e.builder};return void 0===t.builder&&delete t.builder,t},perpDeploy:e=>"registerAsset"in e?{type:e.type,registerAsset:{maxGas:e.registerAsset.maxGas??null,assetRequest:{coin:e.registerAsset.assetRequest.coin,szDecimals:e.registerAsset.assetRequest.szDecimals,oraclePx:e.registerAsset.assetRequest.oraclePx,marginTableId:e.registerAsset.assetRequest.marginTableId,onlyIsolated:e.registerAsset.assetRequest.onlyIsolated},dex:e.registerAsset.dex,schema:e.registerAsset.schema?{fullName:e.registerAsset.schema.fullName,collateralToken:e.registerAsset.schema.collateralToken,oracleUpdater:e.registerAsset.schema.oracleUpdater?.toLowerCase()??null}:null}}:{type:e.type,setOracle:{dex:e.setOracle.dex,oraclePxs:e.setOracle.oraclePxs.map(e=>[...e]),markPxs:e.setOracle.markPxs.map(e=>[...e])}},PerpDexClassTransfer:e=>({type:e.type,signatureChainId:e.signatureChainId,hyperliquidChain:e.hyperliquidChain,dex:e.dex,token:e.token,amount:e.amount,toPerp:e.toPerp,nonce:e.nonce}),PerpDexTransfer:e=>({type:e.type,signatureChainId:e.signatureChainId,hyperliquidChain:e.hyperliquidChain,sourceDex:e.sourceDex,destinationDex:e.destinationDex,amount:e.amount,nonce:e.nonce}),registerReferrer:e=>({type:e.type,code:e.code}),reserveRequestWeight:e=>({type:e.type,weight:e.weight}),scheduleCancel:e=>{let t={type:e.type,time:e.time};return void 0===t.time&&delete t.time,t},setDisplayName:e=>({type:e.type,displayName:e.displayName}),setReferrer:e=>({type:e.type,code:e.code}),spotDeploy:e=>{if("genesis"in e){let t={type:e.type,genesis:{token:e.genesis.token,maxSupply:e.genesis.maxSupply,noHyperliquidity:e.genesis.noHyperliquidity}};return void 0===t.genesis.noHyperliquidity&&delete t.genesis.noHyperliquidity,t}if("registerHyperliquidity"in e){let t={type:e.type,registerHyperliquidity:{spot:e.registerHyperliquidity.spot,startPx:e.registerHyperliquidity.startPx,orderSz:e.registerHyperliquidity.orderSz,nOrders:e.registerHyperliquidity.nOrders,nSeededLevels:e.registerHyperliquidity.nSeededLevels}};return void 0===t.registerHyperliquidity.nSeededLevels&&delete t.registerHyperliquidity.nSeededLevels,t}if("registerSpot"in e)return{type:e.type,registerSpot:{tokens:[...e.registerSpot.tokens]}};if("registerToken2"in e){let t={type:e.type,registerToken2:{spec:{name:e.registerToken2.spec.name,szDecimals:e.registerToken2.spec.szDecimals,weiDecimals:e.registerToken2.spec.weiDecimals},maxGas:e.registerToken2.maxGas,fullName:e.registerToken2.fullName}};return void 0===t.registerToken2.fullName&&delete t.registerToken2.fullName,t}{if("setDeployerTradingFeeShare"in e)return{type:e.type,setDeployerTradingFeeShare:{token:e.setDeployerTradingFeeShare.token,share:e.setDeployerTradingFeeShare.share}};let t={type:e.type,userGenesis:{token:e.userGenesis.token,userAndWei:e.userGenesis.userAndWei.map(e=>[...e]),existingTokenAndWei:e.userGenesis.existingTokenAndWei.map(e=>[...e]),blacklistUsers:e.userGenesis.blacklistUsers?.map(e=>[...e])}};return void 0===t.userGenesis.blacklistUsers&&delete t.userGenesis.blacklistUsers,t}},spotSend:e=>({type:e.type,signatureChainId:e.signatureChainId,hyperliquidChain:e.hyperliquidChain,destination:e.destination.toLowerCase(),token:e.token,amount:e.amount,time:e.time}),spotUser:e=>({type:e.type,toggleSpotDusting:{optOut:e.toggleSpotDusting.optOut}}),subAccountSpotTransfer:e=>({type:e.type,subAccountUser:e.subAccountUser.toLowerCase(),isDeposit:e.isDeposit,token:e.token,amount:e.amount}),subAccountTransfer:e=>({type:e.type,subAccountUser:e.subAccountUser.toLowerCase(),isDeposit:e.isDeposit,usd:e.usd}),tokenDelegate:e=>({type:e.type,signatureChainId:e.signatureChainId,hyperliquidChain:e.hyperliquidChain,validator:e.validator.toLowerCase(),wei:e.wei,isUndelegate:e.isUndelegate,nonce:e.nonce}),twapCancel:e=>({type:e.type,a:e.a,t:e.t}),twapOrder:e=>({type:e.type,twap:{a:e.twap.a,b:e.twap.b,s:eC(e.twap.s),r:e.twap.r,m:e.twap.m,t:e.twap.t}}),updateIsolatedMargin:e=>({type:e.type,asset:e.asset,isBuy:e.isBuy,ntli:e.ntli}),updateLeverage:e=>({type:e.type,asset:e.asset,isCross:e.isCross,leverage:e.leverage}),usdClassTransfer:e=>({type:e.type,signatureChainId:e.signatureChainId,hyperliquidChain:e.hyperliquidChain,amount:e.amount,toPerp:e.toPerp,nonce:e.nonce}),usdSend:e=>({type:e.type,signatureChainId:e.signatureChainId,hyperliquidChain:e.hyperliquidChain,destination:e.destination.toLowerCase(),amount:e.amount,time:e.time}),vaultDistribute:e=>({type:e.type,vaultAddress:e.vaultAddress,usd:e.usd}),vaultModify:e=>({type:e.type,vaultAddress:e.vaultAddress,allowDeposits:e.allowDeposits,alwaysCloseOnWithdraw:e.alwaysCloseOnWithdraw}),vaultTransfer:e=>({type:e.type,vaultAddress:e.vaultAddress,isDeposit:e.isDeposit,usd:e.usd}),withdraw3:e=>({type:e.type,signatureChainId:e.signatureChainId,hyperliquidChain:e.hyperliquidChain,destination:e.destination.toLowerCase(),amount:e.amount,time:e.time})};function eC(e){if(!e.includes("."))return e;let[t,r]=e.split("."),n=r.replace(/0+$/,"");return n?`${t}.${n}`:t}let eT={approveAgent:{"HyperliquidTransaction:ApproveAgent":[{name:"hyperliquidChain",type:"string"},{name:"agentAddress",type:"address"},{name:"agentName",type:"string"},{name:"nonce",type:"uint64"}]},approveBuilderFee:{"HyperliquidTransaction:ApproveBuilderFee":[{name:"hyperliquidChain",type:"string"},{name:"maxFeeRate",type:"string"},{name:"builder",type:"address"},{name:"nonce",type:"uint64"}]},cDeposit:{"HyperliquidTransaction:CDeposit":[{name:"hyperliquidChain",type:"string"},{name:"wei",type:"uint64"},{name:"nonce",type:"uint64"}]},convertToMultiSigUser:{"HyperliquidTransaction:ConvertToMultiSigUser":[{name:"hyperliquidChain",type:"string"},{name:"signers",type:"string"},{name:"nonce",type:"uint64"}]},cWithdraw:{"HyperliquidTransaction:CWithdraw":[{name:"hyperliquidChain",type:"string"},{name:"wei",type:"uint64"},{name:"nonce",type:"uint64"}]},PerpDexClassTransfer:{"HyperliquidTransaction:PerpDexClassTransfer":[{name:"hyperliquidChain",type:"string"},{name:"dex",type:"string"},{name:"token",type:"string"},{name:"amount",type:"string"},{name:"toPerp",type:"bool"},{name:"nonce",type:"uint64"}]},PerpDexTransfer:{"HyperliquidTransaction:PerpDexTransfer":[{name:"hyperliquidChain",type:"string"},{name:"sourceDex",type:"string"},{name:"destinationDex",type:"string"},{name:"amount",type:"string"},{name:"nonce",type:"uint64"}]},multiSig:{"HyperliquidTransaction:SendMultiSig":[{name:"hyperliquidChain",type:"string"},{name:"multiSigActionHash",type:"bytes32"},{name:"nonce",type:"uint64"}]},spotSend:{"HyperliquidTransaction:SpotSend":[{name:"hyperliquidChain",type:"string"},{name:"destination",type:"string"},{name:"token",type:"string"},{name:"amount",type:"string"},{name:"time",type:"uint64"}]},tokenDelegate:{"HyperliquidTransaction:TokenDelegate":[{name:"hyperliquidChain",type:"string"},{name:"validator",type:"address"},{name:"wei",type:"uint64"},{name:"isUndelegate",type:"bool"},{name:"nonce",type:"uint64"}]},usdClassTransfer:{"HyperliquidTransaction:UsdClassTransfer":[{name:"hyperliquidChain",type:"string"},{name:"amount",type:"string"},{name:"toPerp",type:"bool"},{name:"nonce",type:"uint64"}]},usdSend:{"HyperliquidTransaction:UsdSend":[{name:"hyperliquidChain",type:"string"},{name:"destination",type:"string"},{name:"amount",type:"string"},{name:"time",type:"uint64"}]},withdraw3:{"HyperliquidTransaction:Withdraw":[{name:"hyperliquidChain",type:"string"},{name:"destination",type:"string"},{name:"amount",type:"string"},{name:"time",type:"uint64"}]}};function ek(e){let{action:t,nonce:r,vaultAddress:n,expiresAfter:i}=e,s=(0,ef.l)(t),o=eE(r),l=new Uint8Array(n?[1]:[0]),p=n?ep.hexToBytes(n.slice(2)):new Uint8Array,u=void 0!==i?new Uint8Array([0]):new Uint8Array,c=void 0!==i?eE(i):new Uint8Array,y=ep.concatBytes(s,o,l,p,u,c),h=(0,a.lY)(y);return`0x${ep.bytesToHex(h)}`}function eE(e){let t=new Uint8Array(8);return new DataView(t.buffer).setBigUint64(0,BigInt(e)),t}async function eI(e){let{wallet:t,action:r,nonce:n,isTestnet:i=!1,vaultAddress:s,expiresAfter:a}=e,o=ek({action:r,nonce:n,vaultAddress:s,expiresAfter:a});return await eq({wallet:t,domain:{name:"Exchange",version:"1",chainId:1337,verifyingContract:"0x0000000000000000000000000000000000000000"},types:{Agent:[{name:"source",type:"string"},{name:"connectionId",type:"bytes32"}]},primaryType:"Agent",message:{source:i?"b":"a",connectionId:o}})}async function eO(e){let{wallet:t,action:r,types:n}=e;return await eq({wallet:t,domain:{name:"HyperliquidSignTransaction",version:"1",chainId:parseInt(r.signatureChainId),verifyingContract:"0x0000000000000000000000000000000000000000"},types:n,primaryType:Object.keys(n)[0],message:r})}async function eR(e){let{wallet:t,action:r,nonce:n,isTestnet:i=!1,vaultAddress:s,expiresAfter:a}=e,o=ek({action:r,nonce:n,vaultAddress:s,expiresAfter:a}),l={signatureChainId:r.signatureChainId,hyperliquidChain:i?"Testnet":"Mainnet",multiSigActionHash:o,nonce:n};return await eq({wallet:t,domain:{name:"HyperliquidSignTransaction",version:"1",chainId:parseInt(l.signatureChainId),verifyingContract:"0x0000000000000000000000000000000000000000"},types:{"HyperliquidTransaction:SendMultiSig":[{name:"hyperliquidChain",type:"string"},{name:"multiSigActionHash",type:"bytes32"},{name:"nonce",type:"uint64"}]},primaryType:"HyperliquidTransaction:SendMultiSig",message:l})}class eP extends i{response;constructor(e){let t;if("err"===e.status)t=e.response;else if("statuses"in e.response.data){let r=e.response.data.statuses.reduce((e,t,r)=>("object"==typeof t&&"error"in t&&e.push(`Order ${r}: ${t.error}`),e),[]);r.length>0&&(t=r.join(", "))}else"object"==typeof e.response.data.status&&"error"in e.response.data.status&&(t=e.response.data.status.error);super(t||"An unknown error occurred while processing an API request. See `response` for more details."),this.response=e,this.name="ApiRequestError"}}class eD{lastNonce=0;getNonce(){let e=Date.now();return e<=this.lastNonce?e=++this.lastNonce:this.lastNonce=e,e}}class ej{transport;wallet;isTestnet;defaultVaultAddress;defaultExpiresAfter;signatureChainId;nonceManager;constructor(e){this.transport=e.transport,this.wallet=e.wallet,this.isTestnet=e.isTestnet??!1,this.defaultVaultAddress=e.defaultVaultAddress,this.defaultExpiresAfter=e.defaultExpiresAfter,this.signatureChainId=e.signatureChainId??this._guessSignatureChainId,this.nonceManager=e.nonceManager??new eD().getNonce}async approveAgent(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.approveAgent({type:"approveAgent",hyperliquidChain:this._getHyperliquidChain(),signatureChainId:await this._getSignatureChainId(),nonce:n,...r}),s=await eO({wallet:this.wallet,action:i,types:eT[i.type]});""===i.agentName&&(i.agentName=null);let a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async approveBuilderFee(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.approveBuilderFee({type:"approveBuilderFee",hyperliquidChain:this._getHyperliquidChain(),signatureChainId:await this._getSignatureChainId(),nonce:n,...r}),s=await eO({wallet:this.wallet,action:i,types:eT[i.type]}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async batchModify(e,t){let{vaultAddress:r=this.defaultVaultAddress,expiresAfter:n=await this._getDefaultExpiresAfter(),...i}=e,s=await this.nonceManager(),a=e_.batchModify({type:"batchModify",...i}),o=await eI({wallet:this.wallet,action:a,nonce:s,isTestnet:this.isTestnet,vaultAddress:r,expiresAfter:n}),l=await this.transport.request("exchange",{action:a,signature:o,nonce:s,vaultAddress:r,expiresAfter:n},t);return this._validateResponse(l),l}async cancel(e,t){let{vaultAddress:r=this.defaultVaultAddress,expiresAfter:n=await this._getDefaultExpiresAfter(),...i}=e,s=await this.nonceManager(),a=e_.cancel({type:"cancel",...i}),o=await eI({wallet:this.wallet,action:a,nonce:s,isTestnet:this.isTestnet,vaultAddress:r,expiresAfter:n}),l=await this.transport.request("exchange",{action:a,signature:o,nonce:s,vaultAddress:r,expiresAfter:n},t);return this._validateResponse(l),l}async cancelByCloid(e,t){let{vaultAddress:r=this.defaultVaultAddress,expiresAfter:n=await this._getDefaultExpiresAfter(),...i}=e,s=await this.nonceManager(),a=e_.cancelByCloid({type:"cancelByCloid",...i}),o=await eI({wallet:this.wallet,action:a,nonce:s,isTestnet:this.isTestnet,vaultAddress:r,expiresAfter:n}),l=await this.transport.request("exchange",{action:a,signature:o,nonce:s,vaultAddress:r,expiresAfter:n},t);return this._validateResponse(l),l}async cDeposit(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.cDeposit({type:"cDeposit",hyperliquidChain:this._getHyperliquidChain(),signatureChainId:await this._getSignatureChainId(),nonce:n,...r}),s=await eO({wallet:this.wallet,action:i,types:eT[i.type]}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async claimRewards(e){let t=await this.nonceManager(),r=e_.claimRewards({type:"claimRewards"}),n=await eI({wallet:this.wallet,action:r,nonce:t,isTestnet:this.isTestnet}),i=await this.transport.request("exchange",{action:r,signature:n,nonce:t},e);return this._validateResponse(i),i}async convertToMultiSigUser(e,t){let r=await this.nonceManager(),n=e_.convertToMultiSigUser({type:"convertToMultiSigUser",hyperliquidChain:this._getHyperliquidChain(),signatureChainId:await this._getSignatureChainId(),signers:JSON.stringify(e),nonce:r}),i=await eO({wallet:this.wallet,action:n,types:eT[n.type]}),s=await this.transport.request("exchange",{action:n,signature:i,nonce:r},t);return this._validateResponse(s),s}async createSubAccount(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.createSubAccount({type:"createSubAccount",...r}),s=await eI({wallet:this.wallet,action:i,nonce:n,isTestnet:this.isTestnet}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async createVault(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.createVault({type:"createVault",nonce:n,...r}),s=await eI({wallet:this.wallet,action:i,nonce:n,isTestnet:this.isTestnet}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async cSignerAction(e,t){let{expiresAfter:r=await this._getDefaultExpiresAfter(),...n}=e,i=await this.nonceManager(),s=e_.CSignerAction({type:"CSignerAction",...n}),a=await eI({wallet:this.wallet,action:s,nonce:i,isTestnet:this.isTestnet,expiresAfter:r}),o=await this.transport.request("exchange",{action:s,signature:a,nonce:i,expiresAfter:r},t);return this._validateResponse(o),o}async cValidatorAction(e,t){let{expiresAfter:r=await this._getDefaultExpiresAfter(),...n}=e,i=await this.nonceManager(),s=e_.CValidatorAction({type:"CValidatorAction",...n}),a=await eI({wallet:this.wallet,action:s,nonce:i,isTestnet:this.isTestnet,expiresAfter:r}),o=await this.transport.request("exchange",{action:s,signature:a,nonce:i,expiresAfter:r},t);return this._validateResponse(o),o}async cWithdraw(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.cWithdraw({type:"cWithdraw",hyperliquidChain:this._getHyperliquidChain(),signatureChainId:await this._getSignatureChainId(),nonce:n,...r}),s=await eO({wallet:this.wallet,action:i,types:eT[i.type]}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async evmUserModify(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.evmUserModify({type:"evmUserModify",...r}),s=await eI({wallet:this.wallet,action:i,nonce:n,isTestnet:this.isTestnet}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async modify(e,t){let{vaultAddress:r=this.defaultVaultAddress,expiresAfter:n=await this._getDefaultExpiresAfter(),...i}=e,s=await this.nonceManager(),a=e_.modify({type:"modify",...i}),o=await eI({wallet:this.wallet,action:a,nonce:s,isTestnet:this.isTestnet,vaultAddress:r,expiresAfter:n}),l=await this.transport.request("exchange",{action:a,signature:o,nonce:s,vaultAddress:r,expiresAfter:n},t);return this._validateResponse(l),l}async multiSig(e,t){let{vaultAddress:r=this.defaultVaultAddress,expiresAfter:n=await this._getDefaultExpiresAfter(),nonce:i,...s}=e,a=e_.multiSig({type:"multiSig",signatureChainId:await this._getSignatureChainId(),...s}),o=structuredClone(a);delete o.type;let l=await eR({wallet:this.wallet,action:o,nonce:i,isTestnet:this.isTestnet,vaultAddress:r,expiresAfter:n}),p=await this.transport.request("exchange",{action:a,signature:l,nonce:i,vaultAddress:r,expiresAfter:n},t);return this._validateResponse(p),p}async order(e,t){let{vaultAddress:r=this.defaultVaultAddress,expiresAfter:n=await this._getDefaultExpiresAfter(),...i}=e,s=await this.nonceManager(),a=e_.order({type:"order",...i}),o=await eI({wallet:this.wallet,action:a,nonce:s,isTestnet:this.isTestnet,vaultAddress:r,expiresAfter:n}),l=await this.transport.request("exchange",{action:a,signature:o,nonce:s,vaultAddress:r,expiresAfter:n},t);return this._validateResponse(l),l}async perpDeploy(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.perpDeploy({type:"perpDeploy",...r}),s=await eI({wallet:this.wallet,action:i,nonce:n,isTestnet:this.isTestnet}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async perpDexClassTransfer(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.PerpDexClassTransfer({type:"PerpDexClassTransfer",hyperliquidChain:this._getHyperliquidChain(),signatureChainId:await this._getSignatureChainId(),nonce:n,...r}),s=await eO({wallet:this.wallet,action:i,types:eT[i.type]}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async perpDexTransfer(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.PerpDexTransfer({type:"PerpDexTransfer",hyperliquidChain:this._getHyperliquidChain(),signatureChainId:await this._getSignatureChainId(),nonce:n,...r}),s=await eO({wallet:this.wallet,action:i,types:eT[i.type]}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async registerReferrer(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.registerReferrer({type:"registerReferrer",...r}),s=await eI({wallet:this.wallet,action:i,nonce:n,isTestnet:this.isTestnet}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async reserveRequestWeight(e,t){let{expiresAfter:r=await this._getDefaultExpiresAfter(),...n}=e,i=await this.nonceManager(),s=e_.reserveRequestWeight({type:"reserveRequestWeight",...n}),a=await eI({wallet:this.wallet,action:s,nonce:i,isTestnet:this.isTestnet,expiresAfter:r}),o=await this.transport.request("exchange",{action:s,signature:a,nonce:i,expiresAfter:r},t);return this._validateResponse(o),o}async scheduleCancel(e,t){let r=e instanceof AbortSignal?{}:e??{},n=e instanceof AbortSignal?e:t,{vaultAddress:i=this.defaultVaultAddress,expiresAfter:s=await this._getDefaultExpiresAfter(),...a}=r,o=await this.nonceManager(),l=e_.scheduleCancel({type:"scheduleCancel",...a}),p=await eI({wallet:this.wallet,action:l,nonce:o,isTestnet:this.isTestnet,vaultAddress:i,expiresAfter:s}),u=await this.transport.request("exchange",{action:l,signature:p,nonce:o,vaultAddress:i,expiresAfter:s},n);return this._validateResponse(u),u}async setDisplayName(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.setDisplayName({type:"setDisplayName",...r}),s=await eI({wallet:this.wallet,action:i,nonce:n,isTestnet:this.isTestnet}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async setReferrer(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.setReferrer({type:"setReferrer",...r}),s=await eI({wallet:this.wallet,action:i,nonce:n,isTestnet:this.isTestnet}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async spotDeploy(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.spotDeploy({type:"spotDeploy",...r}),s=await eI({wallet:this.wallet,action:i,nonce:n,isTestnet:this.isTestnet}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async spotSend(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.spotSend({type:"spotSend",hyperliquidChain:this._getHyperliquidChain(),signatureChainId:await this._getSignatureChainId(),time:n,...r}),s=await eO({wallet:this.wallet,action:i,types:eT[i.type]}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async spotUser(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.spotUser({type:"spotUser",...r}),s=await eI({wallet:this.wallet,action:i,nonce:n,isTestnet:this.isTestnet}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async subAccountSpotTransfer(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.subAccountSpotTransfer({type:"subAccountSpotTransfer",...r}),s=await eI({wallet:this.wallet,action:i,nonce:n,isTestnet:this.isTestnet}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async subAccountTransfer(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.subAccountTransfer({type:"subAccountTransfer",...r}),s=await eI({wallet:this.wallet,action:i,nonce:n,isTestnet:this.isTestnet}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async tokenDelegate(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.tokenDelegate({type:"tokenDelegate",hyperliquidChain:this._getHyperliquidChain(),signatureChainId:await this._getSignatureChainId(),nonce:n,...r}),s=await eO({wallet:this.wallet,action:i,types:eT[i.type]}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async twapCancel(e,t){let{vaultAddress:r=this.defaultVaultAddress,expiresAfter:n=await this._getDefaultExpiresAfter(),...i}=e,s=await this.nonceManager(),a=e_.twapCancel({type:"twapCancel",...i}),o=await eI({wallet:this.wallet,action:a,nonce:s,isTestnet:this.isTestnet,vaultAddress:r,expiresAfter:n}),l=await this.transport.request("exchange",{action:a,signature:o,nonce:s,vaultAddress:r,expiresAfter:n},t);return this._validateResponse(l),l}async twapOrder(e,t){let{vaultAddress:r=this.defaultVaultAddress,expiresAfter:n=await this._getDefaultExpiresAfter(),...i}=e,s=await this.nonceManager(),a=e_.twapOrder({type:"twapOrder",twap:{...i}}),o=await eI({wallet:this.wallet,action:a,nonce:s,isTestnet:this.isTestnet,vaultAddress:r,expiresAfter:n}),l=await this.transport.request("exchange",{action:a,signature:o,nonce:s,vaultAddress:r,expiresAfter:n},t);return this._validateResponse(l),l}async updateIsolatedMargin(e,t){let{vaultAddress:r=this.defaultVaultAddress,expiresAfter:n=await this._getDefaultExpiresAfter(),...i}=e,s=await this.nonceManager(),a=e_.updateIsolatedMargin({type:"updateIsolatedMargin",...i}),o=await eI({wallet:this.wallet,action:a,nonce:s,isTestnet:this.isTestnet,vaultAddress:r,expiresAfter:n}),l=await this.transport.request("exchange",{action:a,signature:o,nonce:s,vaultAddress:r,expiresAfter:n},t);return this._validateResponse(l),l}async updateLeverage(e,t){let{vaultAddress:r=this.defaultVaultAddress,expiresAfter:n=await this._getDefaultExpiresAfter(),...i}=e,s=await this.nonceManager(),a=e_.updateLeverage({type:"updateLeverage",...i}),o=await eI({wallet:this.wallet,action:a,nonce:s,isTestnet:this.isTestnet,vaultAddress:r,expiresAfter:n}),l=await this.transport.request("exchange",{action:a,signature:o,nonce:s,vaultAddress:r,expiresAfter:n},t);return this._validateResponse(l),l}async usdClassTransfer(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.usdClassTransfer({type:"usdClassTransfer",hyperliquidChain:this._getHyperliquidChain(),signatureChainId:await this._getSignatureChainId(),nonce:n,...r}),s=await eO({wallet:this.wallet,action:i,types:eT[i.type]}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async usdSend(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.usdSend({type:"usdSend",hyperliquidChain:this._getHyperliquidChain(),signatureChainId:await this._getSignatureChainId(),time:n,...r}),s=await eO({wallet:this.wallet,action:i,types:eT[i.type]}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async vaultDistribute(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.vaultDistribute({type:"vaultDistribute",...r}),s=await eI({wallet:this.wallet,action:i,nonce:n,isTestnet:this.isTestnet}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async vaultModify(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.vaultModify({type:"vaultModify",...r}),s=await eI({wallet:this.wallet,action:i,nonce:n,isTestnet:this.isTestnet}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async vaultTransfer(e,t){let{expiresAfter:r=await this._getDefaultExpiresAfter(),...n}=e,i=await this.nonceManager(),s=e_.vaultTransfer({type:"vaultTransfer",...n}),a=await eI({wallet:this.wallet,action:s,nonce:i,isTestnet:this.isTestnet,expiresAfter:r}),o=await this.transport.request("exchange",{action:s,signature:a,nonce:i,expiresAfter:r},t);return this._validateResponse(o),o}async withdraw3(e,t){let{...r}=e,n=await this.nonceManager(),i=e_.withdraw3({type:"withdraw3",hyperliquidChain:this._getHyperliquidChain(),signatureChainId:await this._getSignatureChainId(),time:n,...r}),s=await eO({wallet:this.wallet,action:i,types:eT[i.type]}),a=await this.transport.request("exchange",{action:i,signature:s,nonce:n},t);return this._validateResponse(a),a}async _guessSignatureChainId(){if(eA(this.wallet)){if("getChainId"in this.wallet&&"function"==typeof this.wallet.getChainId){let e=await this.wallet.getChainId();return`0x${e.toString(16)}`}}else if(eg(this.wallet)||ew(this.wallet)){if("provider"in this.wallet&&"object"==typeof this.wallet.provider&&null!==this.wallet.provider&&"getNetwork"in this.wallet.provider&&"function"==typeof this.wallet.provider.getNetwork){let e=await this.wallet.provider.getNetwork();return`0x${e.chainId.toString(16)}`}}else if(ex(this.wallet)){let[e]=await this.wallet.request({method:"eth_chainId",params:[]});return e}return this.isTestnet?"0x66eee":"0xa4b1"}async _getDefaultExpiresAfter(){return"number"==typeof this.defaultExpiresAfter?this.defaultExpiresAfter:await this.defaultExpiresAfter?.()}async _getSignatureChainId(){return"string"==typeof this.signatureChainId?this.signatureChainId:await this.signatureChainId()}_getHyperliquidChain(){return this.isTestnet?"Testnet":"Mainnet"}_validateResponse(e){if("err"===e.status)throw new eP(e);if("order"===e.response.type||"cancel"===e.response.type){if(e.response.data.statuses.some(e=>"object"==typeof e&&"error"in e))throw new eP(e)}else if(("twapOrder"===e.response.type||"twapCancel"===e.response.type)&&"object"==typeof e.response.data.status&&"error"in e.response.data.status)throw new eP(e)}async [Symbol.asyncDispose](){await this.transport[Symbol.asyncDispose]?.()}}class eM{transport;constructor(e){this.transport=e.transport}allMids(e,t){let r=e instanceof AbortSignal?{}:e,n=e instanceof AbortSignal?e:t,i={type:"allMids",...r};return this.transport.request("info",i,n)}async blockDetails(e,t){let r={type:"blockDetails",...e},{blockDetails:n}=await this.transport.request("explorer",r,t);return n}candleSnapshot(e,t){return this.transport.request("info",{type:"candleSnapshot",req:e},t)}clearinghouseState(e,t){let r={type:"clearinghouseState",...e};return this.transport.request("info",r,t)}delegations(e,t){let r={type:"delegations",...e};return this.transport.request("info",r,t)}delegatorHistory(e,t){let r={type:"delegatorHistory",...e};return this.transport.request("info",r,t)}delegatorRewards(e,t){let r={type:"delegatorRewards",...e};return this.transport.request("info",r,t)}delegatorSummary(e,t){let r={type:"delegatorSummary",...e};return this.transport.request("info",r,t)}exchangeStatus(e){return this.transport.request("info",{type:"exchangeStatus"},e)}extraAgents(e,t){let r={type:"extraAgents",...e};return this.transport.request("info",r,t)}frontendOpenOrders(e,t){let r={type:"frontendOpenOrders",...e};return this.transport.request("info",r,t)}fundingHistory(e,t){let r={type:"fundingHistory",...e};return this.transport.request("info",r,t)}historicalOrders(e,t){let r={type:"historicalOrders",...e};return this.transport.request("info",r,t)}isVip(e,t){let r={type:"isVip",...e};return this.transport.request("info",r,t)}l2Book(e,t){let r={type:"l2Book",...e};return this.transport.request("info",r,t)}leadingVaults(e,t){let r={type:"leadingVaults",...e};return this.transport.request("info",r,t)}legalCheck(e,t){let r={type:"legalCheck",...e};return this.transport.request("info",r,t)}liquidatable(e){return this.transport.request("info",{type:"liquidatable"},e)}marginTable(e,t){let r={type:"marginTable",...e};return this.transport.request("info",r,t)}maxBuilderFee(e,t){let r={type:"maxBuilderFee",...e};return this.transport.request("info",r,t)}maxMarketOrderNtls(e){return this.transport.request("info",{type:"maxMarketOrderNtls"},e)}meta(e,t){let r=e instanceof AbortSignal?{}:e,n=e instanceof AbortSignal?e:t,i={type:"meta",...r};return this.transport.request("info",i,n)}metaAndAssetCtxs(e){return this.transport.request("info",{type:"metaAndAssetCtxs"},e)}openOrders(e,t){let r={type:"openOrders",...e};return this.transport.request("info",r,t)}orderStatus(e,t){let r={type:"orderStatus",...e};return this.transport.request("info",r,t)}perpDeployAuctionStatus(e){return this.transport.request("info",{type:"perpDeployAuctionStatus"},e)}perpDexs(e){return this.transport.request("info",{type:"perpDexs"},e)}perpsAtOpenInterestCap(e){return this.transport.request("info",{type:"perpsAtOpenInterestCap"},e)}portfolio(e,t){let r={type:"portfolio",...e};return this.transport.request("info",r,t)}predictedFundings(e){return this.transport.request("info",{type:"predictedFundings"},e)}preTransferCheck(e,t){let r={type:"preTransferCheck",...e};return this.transport.request("info",r,t)}referral(e,t){let r={type:"referral",...e};return this.transport.request("info",r,t)}spotClearinghouseState(e,t){let r={type:"spotClearinghouseState",...e};return this.transport.request("info",r,t)}spotDeployState(e,t){let r={type:"spotDeployState",...e};return this.transport.request("info",r,t)}spotMeta(e){return this.transport.request("info",{type:"spotMeta"},e)}spotMetaAndAssetCtxs(e){return this.transport.request("info",{type:"spotMetaAndAssetCtxs"},e)}subAccounts(e,t){let r={type:"subAccounts",...e};return this.transport.request("info",r,t)}tokenDetails(e,t){let r={type:"tokenDetails",...e};return this.transport.request("info",r,t)}twapHistory(e,t){let r={type:"twapHistory",...e};return this.transport.request("info",r,t)}async txDetails(e,t){let r={type:"txDetails",...e},{tx:n}=await this.transport.request("explorer",r,t);return n}async userDetails(e,t){let r={type:"userDetails",...e},{txs:n}=await this.transport.request("explorer",r,t);return n}userFees(e,t){let r={type:"userFees",...e};return this.transport.request("info",r,t)}userFills(e,t){let r={type:"userFills",...e};return this.transport.request("info",r,t)}userFillsByTime(e,t){let r={type:"userFillsByTime",...e};return this.transport.request("info",r,t)}userFunding(e,t){let r={type:"userFunding",...e};return this.transport.request("info",r,t)}userNonFundingLedgerUpdates(e,t){let r={type:"userNonFundingLedgerUpdates",...e};return this.transport.request("info",r,t)}userRateLimit(e,t){let r={type:"userRateLimit",...e};return this.transport.request("info",r,t)}userRole(e,t){let r={type:"userRole",...e};return this.transport.request("info",r,t)}userToMultiSigSigners(e,t){let r={type:"userToMultiSigSigners",...e};return this.transport.request("info",r,t)}userTwapSliceFills(e,t){let r={type:"userTwapSliceFills",...e};return this.transport.request("info",r,t)}userTwapSliceFillsByTime(e,t){let r={type:"userTwapSliceFillsByTime",...e};return this.transport.request("info",r,t)}userVaultEquities(e,t){let r={type:"userVaultEquities",...e};return this.transport.request("info",r,t)}validatorL1Votes(e){return this.transport.request("info",{type:"validatorL1Votes"},e)}validatorSummaries(e){return this.transport.request("info",{type:"validatorSummaries"},e)}vaultDetails(e,t){let r={type:"vaultDetails",...e};return this.transport.request("info",r,t)}vaultSummaries(e){return this.transport.request("info",{type:"vaultSummaries"},e)}async [Symbol.asyncDispose](){await this.transport[Symbol.asyncDispose]?.()}}Symbol.asyncDispose;class eU extends s{response;body;constructor(e,t){let r,{response:n,body:i}=e??{};n?(r=`${n.status} ${n.statusText}`.trim(),i&&(r+=` - ${i}`)):r="Unknown error while making an HTTP request. See the `cause` for more details.",super(r,t),this.name="HttpRequestError",this.response=n,this.body=i}}class eN{isTestnet;timeout;server;fetchOptions;onRequest;onResponse;constructor(e){this.isTestnet=e?.isTestnet??!1,this.timeout=e?.timeout===void 0?1e4:e.timeout,this.server={mainnet:{api:e?.server?.mainnet?.api??"https://api.hyperliquid.xyz",rpc:e?.server?.mainnet?.rpc??"https://rpc.hyperliquid.xyz"},testnet:{api:e?.server?.testnet?.api??"https://api.hyperliquid-testnet.xyz",rpc:e?.server?.testnet?.rpc??"https://rpc.hyperliquid-testnet.xyz"}},this.fetchOptions=e?.fetchOptions??{},this.onRequest=e?.onRequest,this.onResponse=e?.onResponse}async request(e,t,r){try{let n=new URL(e,this.server[this.isTestnet?"testnet":"mainnet"]["explorer"===e?"rpc":"api"]),i=function(...e){let t=e.reduce((e,t)=>({...e,...t}),{}),r=e.map(e=>e.headers).filter(e=>"object"==typeof e);r.length>0&&(t.headers=function(...e){if(0===e.length||1===e.length)return new Headers(e[0]);let t=new Headers;for(let r of e)for(let[e,n]of Symbol.iterator in r?r:Object.entries(r))t.set(e,n);return t}(...r));let n=e.map(e=>e.signal).filter(e=>e instanceof AbortSignal);return n.length>0&&(t.signal=n.length>1?AbortSignal.any(n):n[0]),t}({body:JSON.stringify(t),headers:{"Accept-Encoding":"gzip, deflate, br, zstd","Content-Type":"application/json"},keepalive:!0,method:"POST",signal:this.timeout?AbortSignal.timeout(this.timeout):void 0},this.fetchOptions,{signal:r}),s=new Request(n,i);if(this.onRequest){let e=await this.onRequest(s);e instanceof Request&&(s=e)}let a=await fetch(s);if(this.onResponse){let e=await this.onResponse(a);e instanceof Response&&(a=e)}if(!a.ok||!a.headers.get("Content-Type")?.includes("application/json")){let e=await a.text().catch(()=>void 0);throw new eU({response:a,body:e})}let o=await a.json();if(o?.type==="error")throw new eU({response:a,body:o?.message});return o}catch(e){if(e instanceof eU)throw e;throw new eU(void 0,{cause:e})}}}class eB{queue=[];push(e,t){this.queue.push({data:e,signal:t})}*[Symbol.iterator](){for(;this.queue.length>0;){let{data:e,signal:t}=this.queue.shift();t?.aborted||(yield e)}}}class eF extends s{code;constructor(e,t){super(`Error when reconnecting WebSocket: ${e}`),this.code=e,this.name="ReconnectingWebSocketError",this.cause=t}}class eL{_socket;_protocols;_listeners=[];_attempt=0;reconnectOptions;reconnectAbortController=new AbortController;constructor(e,t,r){this.reconnectOptions={maxRetries:r?.maxRetries??3,connectionTimeout:r?.connectionTimeout===void 0?1e4:r.connectionTimeout,connectionDelay:r?.connectionDelay??(e=>Math.min(150*~~(1<<e),1e4)),shouldReconnect:r?.shouldReconnect??(()=>!0),messageBuffer:r?.messageBuffer??new eB},this._socket=this._createSocket(e,t),this._protocols=t,this._setupEventListeners()}_createSocket(e,t){let r=new WebSocket(e,t);if(null===this.reconnectOptions.connectionTimeout)return r;let n=setTimeout(()=>{r.removeEventListener("open",i),r.removeEventListener("close",s),r.close(3008,"Timeout")},this.reconnectOptions.connectionTimeout),i=()=>{r.removeEventListener("close",s),clearTimeout(n)},s=()=>{r.removeEventListener("open",i),clearTimeout(n)};return r.addEventListener("open",i,{once:!0}),r.addEventListener("close",s,{once:!0}),r}_setupEventListeners(){this._socket.addEventListener("open",this._open,{once:!0}),this._socket.addEventListener("close",this._close,{once:!0})}_open=()=>{for(let e of(this._attempt=0,this.reconnectOptions.messageBuffer))this._socket.send(e)};_close=async e=>{try{if(this._socket.readyState!==eL.CLOSING&&this._socket.readyState!==eL.CLOSED||this.reconnectAbortController.signal.aborted)return;if(++this._attempt>this.reconnectOptions.maxRetries)return void this._cleanup("RECONNECTION_LIMIT_REACHED");let t=await this.reconnectOptions.shouldReconnect(e,this.reconnectAbortController.signal);if(this.reconnectAbortController.signal.aborted)return;if(!t)return void this._cleanup("RECONNECTION_STOPPED_BY_USER");let r="number"==typeof this.reconnectOptions.connectionDelay?this.reconnectOptions.connectionDelay:await this.reconnectOptions.connectionDelay(this._attempt,this.reconnectAbortController.signal);if(this.reconnectAbortController.signal.aborted)return;await function(e,t){return t?.aborted?Promise.reject(t.reason):new Promise((r,n)=>{let i=()=>{clearTimeout(s),n(t?.reason)},s=setTimeout(()=>{t?.removeEventListener("abort",i),r()},e);t?.addEventListener("abort",i,{once:!0})})}(r,this.reconnectAbortController.signal);let{onclose:n,onerror:i,onmessage:s,onopen:a}=this._socket;this._socket=this._createSocket(this._socket.url,this._protocols),this._setupEventListeners(),this._listeners.forEach(({type:e,listenerProxy:t,options:r})=>{this._socket.addEventListener(e,t,r)}),this._socket.onclose=n,this._socket.onerror=i,this._socket.onmessage=s,this._socket.onopen=a}catch(e){this._cleanup("UNKNOWN_ERROR",e)}};_cleanup(e,t){this.reconnectAbortController.abort(new eF(e,t)),this._listeners=[],this._socket.close()}get url(){return this._socket.url}get readyState(){return this._socket.readyState}get bufferedAmount(){return this._socket.bufferedAmount}get extensions(){return this._socket.extensions}get protocol(){return this._socket.protocol}get binaryType(){return this._socket.binaryType}set binaryType(e){this._socket.binaryType=e}CONNECTING=0;OPEN=1;CLOSING=2;CLOSED=3;static CONNECTING=0;static OPEN=1;static CLOSING=2;static CLOSED=3;get onclose(){return this._socket.onclose}set onclose(e){this._socket.onclose=e}get onerror(){return this._socket.onerror}set onerror(e){this._socket.onerror=e}get onmessage(){return this._socket.onmessage}set onmessage(e){this._socket.onmessage=e}get onopen(){return this._socket.onopen}set onopen(e){this._socket.onopen=e}close(e,t,r=!0){this._socket.close(e,t),r&&this._cleanup("USER_INITIATED_CLOSE")}send(e,t){t?.aborted||(this._socket.readyState===eL.OPEN||this.reconnectAbortController.signal.aborted?this._socket.send(e):this.reconnectOptions.messageBuffer.push(e,t))}addEventListener(e,t,r){let n;if(this.reconnectAbortController.signal.aborted)n=t;else{let i=this._listeners.findIndex(n=>e$(n,{type:e,listener:t,options:r}));-1!==i?n=this._listeners[i].listenerProxy:(n=n=>{try{"function"==typeof t?t.call(this,n):t.handleEvent(n)}finally{if("object"==typeof r&&!0===r.once){let n=this._listeners.findIndex(n=>e$(n,{type:e,listener:t,options:r}));-1!==n&&this._listeners.splice(n,1)}}},this._listeners.push({type:e,listener:t,options:r,listenerProxy:n}))}this._socket.addEventListener(e,n,r)}removeEventListener(e,t,r){let n=this._listeners.findIndex(n=>e$(n,{type:e,listener:t,options:r}));if(-1!==n){let{listenerProxy:t}=this._listeners[n];this._socket.removeEventListener(e,t,r),this._listeners.splice(n,1)}else this._socket.removeEventListener(e,t,r)}dispatchEvent(e){return this._socket.dispatchEvent(e)}}function e$(e,t){let r=!!("object"==typeof e.options?e.options.capture:e.options),n=!!("object"==typeof t.options?t.options.capture:t.options);return e.type===t.type&&e.listener===t.listener&&r===n}var eH=class extends EventTarget{dispatchTypedEvent(e,t){return super.dispatchEvent(t)}};class eW extends eH{constructor(e){super(),e.addEventListener("message",e=>{try{let t=JSON.parse(e.data);!function(e){return"object"==typeof e&&null!==e&&"channel"in e&&"string"==typeof e.channel}(t)?function(e){return Array.isArray(e)&&e.length>0&&"object"==typeof e[0]&&null!==e[0]&&!Array.isArray(e[0])&&"height"in e[0]&&"number"==typeof e[0].height&&"blockTime"in e[0]&&"number"==typeof e[0].blockTime&&"hash"in e[0]&&"string"==typeof e[0].hash&&"proposer"in e[0]&&"string"==typeof e[0].proposer&&"numTxs"in e[0]&&"number"==typeof e[0].numTxs}(t)?this.dispatchEvent(new CustomEvent("_explorerBlock",{detail:t})):function(e){return Array.isArray(e)&&e.length>0&&"object"==typeof e[0]&&null!==e[0]&&!Array.isArray(e[0])&&"action"in e[0]&&"object"==typeof e[0].action&&null!==e[0].action&&"block"in e[0]&&"number"==typeof e[0].block&&"error"in e[0]&&("string"==typeof e[0].error||null===e[0].error)&&"hash"in e[0]&&"string"==typeof e[0].hash&&"time"in e[0]&&"number"==typeof e[0].time&&"user"in e[0]&&"string"==typeof e[0].user}(t)&&this.dispatchEvent(new CustomEvent("_explorerTxs",{detail:t})):this.dispatchEvent(new CustomEvent(t.channel,{detail:t.data}))}catch{}})}}class eV{socket;lastId=0;queue=[];lastRequestTime=0;constructor(e,t){this.socket=e,t.addEventListener("subscriptionResponse",e=>{let t=eV.requestToId(e.detail);this.queue.findLast(e=>e.id===t)?.resolve(e.detail)}),t.addEventListener("post",e=>{let t="info"===e.detail.response.type?e.detail.response.payload.data:e.detail.response.payload;this.queue.findLast(t=>t.id===e.detail.id)?.resolve(t)}),t.addEventListener("pong",()=>{this.queue.findLast(e=>"ping"===e.id)?.resolve()}),t.addEventListener("error",e=>{try{let t=e.detail.match(/{.*}/)?.[0];if(!t)return;let r=JSON.parse(t);if("id"in r&&"number"==typeof r.id)return void this.queue.findLast(e=>e.id===r.id)?.reject(new eG(`Server error: ${e.detail}`,{cause:e.detail}));if("subscription"in r&&"object"==typeof r.subscription&&null!==r.subscription){let t=eV.requestToId(r);this.queue.findLast(e=>e.id===t)?.reject(new eG(`Server error: ${e.detail}`,{cause:e.detail}));return}if(e.detail.startsWith("Already subscribed")||e.detail.startsWith("Invalid subscription")){let t=eV.requestToId({method:"subscribe",subscription:r});this.queue.findLast(e=>e.id===t)?.reject(new eG(`Server error: ${e.detail}`,{cause:e.detail}));return}if(e.detail.startsWith("Already unsubscribed")){let t=eV.requestToId({method:"unsubscribe",subscription:r});this.queue.findLast(e=>e.id===t)?.reject(new eG(`Server error: ${e.detail}`,{cause:e.detail}));return}let n=eV.requestToId(r);this.queue.findLast(e=>e.id===n)?.reject(new eG(`Server error: ${e.detail}`,{cause:e.detail}))}catch{}}),e.addEventListener("close",()=>{this.queue.forEach(({reject:e})=>{e(new eG("WebSocket connection closed."))}),this.queue=[]})}async request(e,t,r){let n,i,s=t instanceof AbortSignal?void 0:t,a=t instanceof AbortSignal?t:r;if(a?.aborted)return Promise.reject(a.reason);"post"===e?i={method:e,id:n=++this.lastId,request:s}:"ping"===e?(n="ping",i={method:e}):(i={method:e,subscription:s},n=eV.requestToId(i)),this.socket.send(JSON.stringify(i),a),this.lastRequestTime=Date.now();let{promise:o,resolve:l,reject:p}=Promise.withResolvers();this.queue.push({id:n,resolve:l,reject:p});let u=()=>p(a?.reason);return a?.addEventListener("abort",u,{once:!0}),await o.finally(()=>{let e=this.queue.findLastIndex(e=>e.id===n);-1!==e&&this.queue.splice(e,1),a?.removeEventListener("abort",u)})}static requestToId(e){return JSON.stringify(function e(t){if("object"!=typeof t||null===t)return t;if(Array.isArray(t))return t.map(e);let r={};for(let n of Object.keys(t).sort())r[n]=e(t[n]);return r}(!function(e){let t=JSON.stringify(e);return/0X[0-9a-fA-F]*|0x[0-9a-fA-F]*[A-F][0-9a-fA-F]*/.test(t)}(e)?e:function e(t){if("string"==typeof t)return/^(0X[0-9a-fA-F]*|0x[0-9a-fA-F]*[A-F][0-9a-fA-F]*)$/.test(t)?t.toLowerCase():t;if(Array.isArray(t))return t.map(e);if("object"==typeof t&&null!==t){let r={};for(let[n,i]of Object.entries(t))r[n]=e(i);return r}return t}(e)))}}class eG extends s{constructor(e,t){super(e,t),this.name="WebSocketRequestError"}}class ez{_wsRequester;_hlEvents;_keepAliveTimeout=null;_subscriptions=new Map;_isReconnecting=!1;timeout;keepAlive;autoResubscribe;socket;constructor(e){this.socket=new eL(e?.url??"wss://api.hyperliquid.xyz/ws",void 0,e?.reconnect),this._hlEvents=new eW(this.socket),this._wsRequester=new eV(this.socket,this._hlEvents),this.timeout=e?.timeout===void 0?1e4:e.timeout,this.keepAlive={interval:e?.keepAlive?.interval===void 0?3e4:e.keepAlive?.interval,timeout:e?.keepAlive?.timeout===void 0?this.timeout:e.keepAlive?.timeout},this.autoResubscribe=e?.autoResubscribe??!0,this.socket.addEventListener("open",()=>{this._keepAliveStart(),this._resubscribeStart()}),this.socket.addEventListener("close",()=>{this._keepAliveStop(),this._resubscribeStop(),this._isReconnecting=!0})}async request(e,t,r){try{let n=this.timeout?AbortSignal.timeout(this.timeout):void 0,i=r&&n?AbortSignal.any([r,n]):r??n;return await this._wsRequester.request("post",{type:"exchange"===e?"action":e,payload:t},i)}catch(e){if(e instanceof eG)throw e;throw new eG("Unknown error while making a WebSocket request. See the `cause` for more details.",{cause:e})}}async subscribe(e,t,r){try{let n=eV.requestToId(t),i=this._subscriptions.get(n);if(!i){let e=this._wsRequester.request("subscribe",t);i={listeners:new Map,promise:e,resubscribeAbortController:new AbortController},this._subscriptions.set(n,i)}let s=i.listeners.get(r);return s||(s=async()=>{try{this._hlEvents.removeEventListener(e,r);let i=this._subscriptions.get(n);i?.listeners.delete(r),i?.listeners.size===0&&(this._subscriptions.delete(n),this.socket.readyState===eL.OPEN&&await this._wsRequester.request("unsubscribe",t))}catch(e){if(e instanceof eG)throw e;throw new eG("Unknown error while unsubscribing from a WebSocket channel. See the `cause` for more details.",{cause:e})}},this._hlEvents.addEventListener(e,r),i.listeners.set(r,s)),await i.promise,{unsubscribe:s,resubscribeSignal:i.resubscribeAbortController?.signal}}catch(e){if(e instanceof eG)throw e;throw new eG("Unknown error while subscribing to a WebSocket channel. See the `cause` for more details.",{cause:e})}}ready(e){return new Promise((t,r)=>{let n=e?AbortSignal.any([this.socket.reconnectAbortController.signal,e]):this.socket.reconnectAbortController.signal;if(n.aborted)return r(n.reason);if(this.socket.readyState===eL.OPEN)return t();let i=()=>{n.removeEventListener("abort",s),t()},s=()=>{this.socket.removeEventListener("open",i),r(n.reason)};this.socket.addEventListener("open",i,{once:!0}),n.addEventListener("abort",s,{once:!0})})}close(e){return new Promise((t,r)=>{if(e?.aborted)return r(e.reason);if(this.socket.readyState===eL.CLOSED)return t();let n=()=>{e?.removeEventListener("abort",i),t()},i=()=>{this.socket.removeEventListener("close",n),r(e?.reason)};this.socket.addEventListener("close",n,{once:!0}),e?.addEventListener("abort",i,{once:!0}),this.socket.close()})}_keepAliveStart(){if(null===this.keepAlive.interval||this._keepAliveTimeout)return;let e=async()=>{if(this.socket.readyState===eL.OPEN&&this._keepAliveTimeout&&null!==this.keepAlive.interval){if(Date.now()-this._wsRequester.lastRequestTime>=this.keepAlive.interval){let e=this.keepAlive.timeout?AbortSignal.timeout(this.keepAlive.timeout):void 0;await this._wsRequester.request("ping",e).catch(()=>void 0)}if(this.socket.readyState===eL.OPEN&&this._keepAliveTimeout&&null!==this.keepAlive.interval){let t=this.keepAlive.interval-(Date.now()-this._wsRequester.lastRequestTime);this._keepAliveTimeout=setTimeout(e,t)}}};this._keepAliveTimeout=setTimeout(e,this.keepAlive.interval)}_keepAliveStop(){null!==this._keepAliveTimeout&&(clearTimeout(this._keepAliveTimeout),this._keepAliveTimeout=null)}_resubscribeStart(){if(this.autoResubscribe&&this._isReconnecting)for(let[e,t]of this._subscriptions.entries())t.promise=this._wsRequester.request("subscribe",JSON.parse(e)).catch(e=>{t.resubscribeAbortController?.abort(e)})}_resubscribeStop(){if(!this.autoResubscribe||this.socket.reconnectAbortController.signal.aborted)for(let e of this._subscriptions.values())for(let[t,r]of e.listeners)r()}async [Symbol.asyncDispose](){await this.close()}}},81556:(e,t,r)=>{"use strict";var n=r(13691),i=function(){return!!n};i.hasArrayLengthDefineBug=function(){if(!n)return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=i},82548:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},85718:e=>{"use strict";e.exports=Math.pow},85840:(e,t,r)=>{"use strict";var n,i=r(14756),s=r(5719);try{n=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var a=!!n&&s&&s(Object.prototype,"__proto__"),o=Object,l=o.getPrototypeOf;e.exports=a&&"function"==typeof a.get?i([a.get]):"function"==typeof l&&function(e){return l(null==e?e:o(e))}},88700:e=>{"use strict";e.exports=Math.abs},88748:e=>{"use strict";e.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},89540:(e,t,r)=>{"use strict";var n=r(56507),i=r(14756),s=i([n("%String.prototype.indexOf%")]);e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&s(e,".prototype.")>-1?i([r]):r}},90952:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var r=t.call(e),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},91865:e=>{"use strict";e.exports=Number.isNaN||function(e){return e!=e}},92055:(e,t,r)=>{"use strict";var n;if(!Object.keys){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,a=r(90952),o=Object.prototype.propertyIsEnumerable,l=!o.call({toString:null},"toString"),p=o.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(e){var t=e.constructor;return t&&t.prototype===e},y={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!y["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{c(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),d=function(e){if("undefined"==typeof window||!h)return c(e);try{return c(e)}catch(e){return!1}};n=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===s.call(e),n=a(e),o=t&&"[object String]"===s.call(e),c=[];if(!t&&!r&&!n)throw TypeError("Object.keys called on a non-object");var y=p&&r;if(o&&e.length>0&&!i.call(e,0))for(var h=0;h<e.length;++h)c.push(String(h));if(n&&e.length>0)for(var f=0;f<e.length;++f)c.push(String(f));else for(var g in e)!(y&&"prototype"===g)&&i.call(e,g)&&c.push(String(g));if(l)for(var w=d(e),m=0;m<u.length;++m)!(w&&"constructor"===u[m])&&i.call(e,u[m])&&c.push(u[m]);return c}}e.exports=n},92263:(e,t,r)=>{"use strict";var n=r(6337),i=r(35868),s=r(47298);e.exports=function(){return s(n,i,arguments)}},92391:e=>{"use strict";e.exports=TypeError}}]);