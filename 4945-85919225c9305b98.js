(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4945],{5598:(e,t,n)=>{"use strict";n.d(t,{Cn:()=>i,EE:()=>v,S9:()=>u});var r=n(40459);let s={dex:"venone",perpsDexIndex:16,isTestnet:!0,scaleFactor:1e9,szDecimal:3,maxLeverage:10},o={dex:"vntls",perpsDexIndex:18,isTestnet:!0,scaleFactor:1e9,szDecimal:3,maxLeverage:10},a={dex:"",perpsDexIndex:-1,isTestnet:!1,scaleFactor:1,szDecimal:3,maxLeverage:10},i="venone"===r.env.DEX?s:o;console.log("Using DEX: ",i.dex);let l=[{name:"venone:vANDRL",index:3}].reduce((e,t)=>(e[t.name]=t.index,e),{}),d=[{name:"vntls:vOAI",index:0},{name:"vntls:vSPACEX",index:1},{name:"vntls:vCURSOR",index:2},{name:"vntls:vSTRIPE",index:3},{name:"vntls:vANDRL",index:4},{name:"vntls:vFIG",index:5},{name:"vntls:vANTHRPC",index:6},{name:"vntls:vCOLOSSAL",index:7},{name:"vntls:vKRAKEN",index:8},{name:"vntls:vXAI",index:9},{name:"vntls:vCLUELY",index:10},{name:"vntls:vNLINK",index:11},{name:"vntls:vFIGAI",index:12},{name:"vntls:vCHAIN",index:13},{name:"vntls:vDBRICKS",index:14},{name:"vntls:vPERPLXT",index:15},{name:"vntls:vDISCORD",index:16},{name:"vntls:vPLAID",index:17},{name:"vntls:vRAMP",index:18},{name:"vntls:vBENCHLNG",index:19},{name:"vntls:vPHANT",index:20}].reduce((e,t)=>(e[t.name]=t.index,e),{}),c=[{name:"SOL",index:0},{name:"APT",index:1},{name:"BTC",index:3},{name:"ETH",index:4}].reduce((e,t)=>(e[t.name]=t.index,e),{});function u(e){if(e.startsWith("venone:")){let t=l[e];if(void 0===t)throw Error("Coin ".concat(e," not found"));return t}if(e.startsWith("vntls:")){let t=d[e];if(void 0===t)throw Error("Coin ".concat(e," not found"));return t}if(0>e.indexOf(":")){let t=c[e];if(void 0===t)throw Error("Coin ".concat(e," not found"));return t}throw Error("Coin ".concat(e," not found"))}function v(e){let{coin:t,dex:n}=e,r=function(e){if("venone"===e)return s;if("vntls"===e)return o;if(""===e)return a;throw Error("Invalid DEX ".concat(e))}(n).perpsDexIndex,i=u(t);return 0===r?i:1e5+1e4*r+i}},7144:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(44903),s=n(21593);function o(){let{user:e}=(0,r.Jd)(),{wallets:t}=(0,s.w)(),n=null==e?void 0:e.wallet;if(!n)return null;let o=t.find(e=>e.address===n.address);return o||null}},8379:()=>{},14482:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var r=n(5598),s=n(62942);function o(){let e=(0,s.useSearchParams)();return null!==e.get("dex")?e.get("dex"):r.Cn.dex}},15328:(e,t,n)=>{"use strict";n.d(t,{$g:()=>i,Ay:()=>a,Rr:()=>l});var r=n(54568),s=n(7620);let o=(0,s.createContext)({companies:[]});function a(e){let{companies:t,children:n}=e;return(0,r.jsx)(o.Provider,{value:{companies:t},children:n})}function i(e){let t=(0,s.useContext)(o);if(void 0===t)throw Error("useCompany must be used within a CompaniesProvider");return t.companies.find(t=>t.hyperliquidCoin===e)}function l(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useCompanies must be used within a CompaniesProvider");return e.companies}},24990:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(32987),s=n(60607);function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.QP)((0,r.$)(t))}},31602:(e,t,n)=>{"use strict";n.d(t,{L:()=>o});var r=n(7620),s=n(65460);function o(){let e=(0,r.useContext)(s.b);if(void 0===e)throw Error("useHyperliquidWebSocket must be used within a HyperliquidWebSocketProvider");return e}},46613:(e,t,n)=>{"use strict";function r(e){return e.length<=10?e:"".concat(e.slice(0,6),"...").concat(e.slice(-4))}n.d(t,{A:()=>r})},46786:(e,t,n)=>{"use strict";n.d(t,{A:()=>d,X:()=>c});var r=n(54568),s=n(80294),o=n(44903),a=n(7620),i=n(65364);let l=(0,a.createContext)(void 0);function d(e){let{children:t}=e,[n,d]=(0,a.useState)(!1),{refreshUser:c}=(0,o.Jd)(),u=(0,i.b)(),v=(0,a.useCallback)(async()=>{console.log("[refreshAccountExists] Refreshing account exists...");let e=await c();if(console.log("[refreshAccountExists] refreshedUser: ",e),!e)return d(!1),!1;let t=e.wallet;if(!t)return console.log("[refreshAccountExists] No wallet"),d(!1),!1;let n=new s.G5({isTestnet:u,fetchOptions:{keepalive:!1}}),r=new s.Cf({transport:n});console.log("[refreshAccountExists] Checking if Hyperliquid account exists: ",t.address);let o={user:t.address,source:"0x0000000000000000000000000000000000000000"},a=await r.preTransferCheck(o);return console.log("[refreshAccountExists] Pre transfer check: ",a.userExists,a),d(a.userExists),a.userExists},[c,u]);return(0,a.useEffect)(()=>{v()},[v]),(0,r.jsx)(l.Provider,{value:{accountExists:n,refreshAccountExists:v},children:t})}function c(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAccountExists must be used within a HyperliquidAccountExistsProvider");return e}},47236:(e,t,n)=>{"use strict";n.d(t,{Y:()=>C,q:()=>E});var r=n(54568),s=n(90806),o=n(46613),a=n(44903),i=n(39690),l=n(75344),d=n(14218),c=n(7620);function u(e){var t,n;let{isOpen:u,onClose:v,onApprove:m,error:x}=e,{user:f}=(0,a.Jd)(),[g,h]=(0,c.useState)("none");async function p(){h("pending"),await m()?(h("approved"),setTimeout(()=>{v()},1500)):h("none")}return(0,c.useEffect)(()=>{u&&h("none")},[u]),(0,r.jsx)(s.A,{isOpen:u,onClose:v,zIndex:11e3,children:x?(0,r.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,r.jsx)(i.A,{className:"w-12 h-12 text-brand-red"}),(0,r.jsx)("div",{className:"text-xl font-medium font-sans",children:"Error"}),(0,r.jsx)("p",{className:"text-md font-sans text-center text-muted",children:x})]}):"approved"===g?(0,r.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,r.jsx)(l.A,{className:"w-12 h-12 text-brand-green"}),(0,r.jsx)("div",{className:"text-xl font-medium font-sans",children:"Success!"}),(0,r.jsx)("p",{className:"text-md font-sans text-center text-muted",children:"Connection established."})]}):"pending"===g?(0,r.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,r.jsx)(d.A,{className:"w-12 h-12 text-muted animate-spin"}),(0,r.jsx)("div",{className:"text-xl font-medium font-sans",children:"In progress"}),(0,r.jsx)("p",{className:"text-md font-sans text-center text-muted",children:"Establishing connection..."})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,r.jsx)("div",{className:"text-xl font-medium font-sans",children:"Establish connection"}),(0,r.jsx)("p",{className:"text-md font-sans text-center text-muted",children:"This signature is gas-free to send. It opens a decentralized channel for gas-free and instantaneous trading."}),(0,r.jsxs)("div",{className:"flex flex-col gap-1 p-4 bg-layer-2 border border-border-default rounded w-full",children:[(0,r.jsx)("span",{className:"font-sans text-xs uppercase text-muted",children:"Wallet"}),(0,r.jsx)("span",{className:"hidden md:block font-mono text-sm",children:null==f||null==(t=f.wallet)?void 0:t.address}),(0,r.jsx)("span",{className:"md:hidden font-mono text-sm",children:(0,o.A)((null==f||null==(n=f.wallet)?void 0:n.address)||"")})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{type:"button",className:"px-4 py-2 rounded font-sans border border-border-default text-muted cursor-pointer hover:bg-layer-2",onClick:v,children:"Deny"}),(0,r.jsx)("button",{type:"button",className:"px-4 py-2 rounded font-sans bg-brand-green text-white cursor-pointer",onClick:p,children:"Approve"})]})]})})}var v=n(80294),m=n(11523),x=n(46786),f=n(65364),g=n(7144),h=n(79307),p=n(90030),w=n(34114),b=n(75006);let y=b.z.object({userAddress:b.z.string(),privateKey:b.z.string()}),A=(0,c.createContext)(void 0);function E(){let e=(0,c.useContext)(A);if(void 0===e)throw Error("useAgentWallet must be used within an AgentWalletProvider");return e}function C(e){var t;let{children:n}=e,{user:s}=(0,a.Jd)(),o=function(){let e=(0,p.A)(),t=(0,c.useMemo)(()=>({type:"webData2",user:e}),[e]),n=(0,c.useCallback)(e=>e,[]);return(0,h.k)({payload:t,extractData:n,initialData:null,enabled:!!e})}(),i=function(){let e=(0,g.A)(),{accountExists:t,refreshAccountExists:n}=(0,x.X)(),r=(0,f.b)();return async s=>{if(!e)throw Error("Wallet not connected");if(!t&&!await n())throw Error("Hyperliquid account does not exist for this wallet.");let o=new v.G5({isTestnet:r,fetchOptions:{keepalive:!1}}),a=await e.getEthereumProvider(),i=new m.k(a),l=await i.getSigner(),d=new v.PM({transport:o,isTestnet:r,wallet:l});console.log("[useApproveAgent] approving agent. agent = ".concat(s,". user = ").concat(e.address));let c=await d.approveAgent({agentAddress:s});return console.log("[useApproveAgent] approved agent. agent = ".concat(s,". user = ").concat(e.address)),c}}(),[l,d]=(0,c.useState)(null),[b,E]=(0,c.useState)(!1),[C,S]=(0,c.useState)(null),[N,k]=(0,c.useState)(null),P=null==s||null==(t=s.wallet)?void 0:t.address,j=null==o?void 0:o.agentAddress,L=null==o?void 0:o.agentValidUntil;function D(){if(!P)throw Error("No wallet address found");return"".concat("ventuals:agent","_").concat(P.toLowerCase())}async function I(){if(console.log("[AgentWalletProvider] Approving new agent..."),!P)throw Error("No wallet address found");let e=w.u.createRandom().privateKey,t=new w.u(e);return console.log("[AgentWalletProvider] Calling HL to approve new agent with address:",t.address),await i(t.address),console.log("[AgentWalletProvider] Approved new agent with address:",t.address),sessionStorage.setItem(D(),JSON.stringify({userAddress:P.toLowerCase(),privateKey:t.privateKey})),console.log("[AgentWalletProvider] Set agent in sessionStorage:",t.address),d(t),t}async function T(){return new Promise(e=>{k(null),S(()=>e),E(!0)})}(0,c.useEffect)(()=>{if(!P||!j||!L||Date.now()>L){console.log("[AgentWalletProvider] Agent not found or expired"),d(null);return}try{let e=sessionStorage.getItem(D());if(e){let{privateKey:t}=y.parse(JSON.parse(e)),n=new w.u(t);if(console.log("[AgentWalletProvider] Found stored agent:",n.address),n.address.toLowerCase()===j.toLowerCase())return void d(n);console.log("[AgentWalletProvider] Agent does not match stored agent. Agent address in sessionStorage: ".concat(n.address,", Agent address on HL: ").concat(j)),console.log("[AgentWalletProvider] Clearing stored agent: ".concat(j)),sessionStorage.removeItem(D())}d(null)}catch(e){throw console.error("Error reading from sessionStorage:",e),e}},[P,j,L]);let R=async()=>{try{let e=await I();return e||E(!1),C&&(C(e),S(null)),!0}catch(e){return e&&"object"==typeof e&&"shortMessage"in e?"ACTION_REJECTED"===e.code?k("Approval was rejected by user."):"UNKNOWN_ERROR"===e.code&&e.error?k("Approval failed: ".concat(e.error.message)):k("Approval failed: ".concat(e.shortMessage)):k("Error approving agent. Please try again."),console.error("Error approving agent:",e),C&&(C(null),S(null)),!1}};return(0,r.jsxs)(A.Provider,{value:{agentWallet:l,promptApproveNewAgent:T},children:[(0,r.jsx)(u,{isOpen:b,onClose:()=>{E(!1),k(null),C&&(C(null),S(null))},onApprove:R,error:N}),n]})}},59588:(e,t,n)=>{"use strict";n.d(t,{B:()=>i,U:()=>a});var r=n(54568),s=n(7620);let o=(0,s.createContext)(void 0);function a(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useTimezone must be used within a TimezoneProvider");return e}function i(e){let{children:t}=e,[n,a]=(0,s.useState)("local");return(0,r.jsx)(o.Provider,{value:{timezone:n,setTimezone:a},children:t})}},65364:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var r=n(5598),s=n(62942);function o(){return"false"!==(0,s.useSearchParams)().get("isTestnet")&&r.Cn.isTestnet}},65460:(e,t,n)=>{"use strict";n.d(t,{b:()=>a,r:()=>i});var r=n(54568),s=n(80294),o=n(7620);let a=(0,o.createContext)(void 0),i=e=>{let{children:t,isTestnet:n}=e,[i,l]=(0,o.useState)(null),[d,c]=(0,o.useState)("connecting");return(0,o.useEffect)(()=>{c("connecting"),console.log("Creating new WS transport, isTestnet:",n);let e=new s.TJ({url:n?"wss://api.hyperliquid-testnet.xyz/ws":"wss://api.hyperliquid.xyz/ws"});return l(e),()=>{console.log("Closing WS transport"),e.close()}},[n]),(0,o.useEffect)(()=>{i&&(i.socket.addEventListener("open",()=>{c("connected")}),i.socket.addEventListener("close",()=>{c("disconnected")}),i.socket.addEventListener("error",()=>{c("error")}))},[i]),(0,r.jsx)(a.Provider,{value:{transport:i,connectionStatus:d},children:t})}},69471:()=>{},74472:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,D:()=>a});var r=n(54568),s=n(7620);let o=(0,s.createContext)(void 0),a=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("useDarkMode must be used within a DarkModeProvider");return e},i=e=>{let{children:t}=e,[n,a]=(0,s.useState)(!1),[i,l]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=localStorage.getItem("darkMode");null!==e?a("true"===e):a(window.matchMedia("(prefers-color-scheme: dark)").matches),l(!0)},[]),(0,s.useEffect)(()=>{i&&(n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",n.toString()))},[n,i]),(0,r.jsx)(o.Provider,{value:{isDarkMode:n,toggleDarkMode:()=>{console.log("Toggling dark mode from:",n,"to:",!n),a(e=>!e)}},children:t})}},79307:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var r=n(77251),s=n.n(r),o=n(7620),a=n(31602);function i(e){let{payload:t,extractData:n,initialData:r,enabled:i}=e,d=s()(t);l.has(d)||l.set(d,{data:r,listeners:new Set,subscription:null,hasSubscribed:!1,addSubscriber(e,t,n,r){this.listeners.add(r),this.hasSubscribed||(this.hasSubscribed=!0,this.subscribe(e,t,n)),r(this.data)},async removeSubscriber(e){if(this.listeners.delete(e),0===this.listeners.size){var t;await (null==(t=this.subscription)?void 0:t.unsubscribe()),this.hasSubscribed=!1}},async subscribe(e,t,n){try{console.log("About to subscribe to ",t.type,t),setTimeout(()=>{this.subscription||console.warn("Websocket subscription promise not resolved after 1 second - Check your subscription payload to make sure it doesn't contain an unknown field",t.type,t)},1e3),this.subscription=await e.subscribe(t.type,t,e=>{this.data=n(e.detail),null!==this.data&&this.notifyListeners()}),console.log("Subscription connected to ".concat(t.type,"."))}catch(e){console.error("Failed to subscribe to ".concat(t.type,":"),e)}},notifyListeners(){for(let e of this.listeners)e(this.data)}});let c=l.get(d),[u,v]=(0,o.useState)(r),{transport:m}=(0,a.L)();return(0,o.useEffect)(()=>{if(!m||!1===i)return;let e=e=>{v(e)};return c.addSubscriber(m,t,n,e),()=>{c.removeSubscriber(e)}},[m,c,i,t,n]),u}let l=new Map},79458:(e,t,n)=>{"use strict";function r(e){let{showPlusSign:t=!1,maxDecimalPlaces:n=2}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Math.abs(e),s=n;return e<10?s=4:e<100&&(s=3),"".concat(e<0?"-":t?"+":"","$").concat(r.toLocaleString(void 0,{minimumFractionDigits:s,maximumFractionDigits:s}))}n.d(t,{A:()=>r})},80647:(e,t,n)=>{"use strict";n.d(t,{u:()=>l});var r=n(14482),s=n(79307),o=n(7620),a=n(90030);let i={assetPositions:[],marginSummary:{accountValue:"0",totalNtlPos:"0",totalRawUsd:"0",totalMarginUsed:"0"}};function l(e){let t=(0,r.n)(),n=(0,a.A)(),l=e||n,[d,c]=(0,o.useState)(i),u=(0,o.useMemo)(()=>({type:"clearinghouseState",dex:t,user:l}),[t,l]),v=(0,o.useCallback)(e=>{var t;return(null==(t=e.user)?void 0:t.toLowerCase())!==(null==l?void 0:l.toLowerCase())?null:(c(e.clearinghouseState),e.clearinghouseState)},[l]),m=(0,s.k)({payload:u,extractData:v,initialData:i,enabled:!!l});return null===m?d:m}},90030:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(44903),s=n(62942);function o(){var e,t;let{user:n}=(0,r.Jd)(),o=(0,s.useSearchParams)();return(null==(e=o.get("user"))?void 0:e.length)?o.get("user"):null==n||null==(t=n.wallet)?void 0:t.address}},90806:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(54568),s=n(7620);let o=(0,s.memo)(e=>{let{isOpen:t,onClose:n,children:o,className:a="",zIndex:i=9999}=e,l=(0,s.useRef)(null),d=(0,s.useRef)(!1);return((0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&n()};return t&&!d.current?(null===l.current&&(l.current=document.body.style.overflow),document.addEventListener("keydown",e),document.body.style.overflow="hidden",d.current=!0):!t&&d.current&&(document.removeEventListener("keydown",e),document.body.style.overflow=l.current||"",d.current=!1,l.current=null),()=>{d.current&&(document.removeEventListener("keydown",e),document.body.style.overflow=l.current||"",d.current=!1,l.current=null)}},[t,n]),t)?(0,r.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center",style:{zIndex:i},children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-layer-2/50 backdrop-blur-sm",onClick:n,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&n()},role:"button",tabIndex:0}),(0,r.jsx)("div",{className:"relative bg-layer-1 rounded shadow-2xl max-w-lg w-full mx-3 sm:mx-4 max-h-[90vh] overflow-y-auto p-6 sm:p-8 ".concat(a),children:o})]}):null})}}]);